"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n=require("cross-fetch"),e=require("@urql/core"),t=require("graphql-ws"),r=require("wonka");function a(n){return n&&"object"==typeof n&&"default"in n?n:{default:n}}var i=a(n);function o(n,e,t,r,a,i,o){try{var c=n[i](o),s=c.value}catch(n){return void t(n)}c.done?e(s):Promise.resolve(s).then(r,a)}function c(n){return function(){var e=this,t=arguments;return new Promise((function(r,a){var i=n.apply(e,t);function c(n){o(i,r,a,c,s,"next",n)}function s(n){o(i,r,a,c,s,"throw",n)}c(void 0)}))}}function s(){return s=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},s.apply(this,arguments)}function u(n,e){if(null==n)return{};var t,r,a={},i=Object.keys(n);for(r=0;r<i.length;r++)e.indexOf(t=i[r])>=0||(a[t]=n[t]);return a}function l(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function d(n,e){var t="undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(t)return(t=t.call(n)).next.bind(t);if(Array.isArray(n)||(t=function(n,e){if(n){if("string"==typeof n)return l(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?l(n,e):void 0}}(n))||e&&n&&"number"==typeof n.length){t&&(n=t);var r=0;return function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var p={exports:{}};!function(n){var e=function(n){var e,t=Object.prototype,r=t.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(n,e,t){return Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}),n[e]}try{s({},"")}catch(n){s=function(n,e,t){return n[e]=t}}function u(n,e,t,r){var a=Object.create((e&&e.prototype instanceof m?e:m).prototype),i=new S(r||[]);return a._invoke=function(n,e,t){var r=d;return function(a,i){if(r===f)throw new Error("Generator is already running");if(r===h){if("throw"===a)throw i;return P()}for(t.method=a,t.arg=i;;){var o=t.delegate;if(o){var c=A(o,t);if(c){if(c===y)continue;return c}}if("next"===t.method)t.sent=t._sent=t.arg;else if("throw"===t.method){if(r===d)throw r=h,t.arg;t.dispatchException(t.arg)}else"return"===t.method&&t.abrupt("return",t.arg);r=f;var s=l(n,e,t);if("normal"===s.type){if(r=t.done?h:p,s.arg===y)continue;return{value:s.arg,done:t.done}}"throw"===s.type&&(r=h,t.method="throw",t.arg=s.arg)}}}(n,t,i),a}function l(n,e,t){try{return{type:"normal",arg:n.call(e,t)}}catch(n){return{type:"throw",arg:n}}}n.wrap=u;var d="suspendedStart",p="suspendedYield",f="executing",h="completed",y={};function m(){}function v(){}function b(){}var E={};s(E,i,(function(){return this}));var x=Object.getPrototypeOf,I=x&&x(x(q([])));I&&I!==t&&r.call(I,i)&&(E=I);var g=b.prototype=m.prototype=Object.create(E);function w(n){["next","throw","return"].forEach((function(e){s(n,e,(function(n){return this._invoke(e,n)}))}))}function k(n,e){function t(a,i,o,c){var s=l(n[a],n,i);if("throw"!==s.type){var u=s.arg,d=u.value;return d&&"object"==typeof d&&r.call(d,"__await")?e.resolve(d.__await).then((function(n){t("next",n,o,c)}),(function(n){t("throw",n,o,c)})):e.resolve(d).then((function(n){u.value=n,o(u)}),(function(n){return t("throw",n,o,c)}))}c(s.arg)}var a;this._invoke=function(n,r){function i(){return new e((function(e,a){t(n,r,e,a)}))}return a=a?a.then(i,i):i()}}function A(n,t){var r=n.iterator[t.method];if(r===e){if(t.delegate=null,"throw"===t.method){if(n.iterator.return&&(t.method="return",t.arg=e,A(n,t),"throw"===t.method))return y;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var a=l(r,n.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,y;var i=a.arg;return i?i.done?(t[n.resultName]=i.value,t.next=n.nextLoc,"return"!==t.method&&(t.method="next",t.arg=e),t.delegate=null,y):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,y)}function C(n){var e={tryLoc:n[0]};1 in n&&(e.catchLoc=n[1]),2 in n&&(e.finallyLoc=n[2],e.afterLoc=n[3]),this.tryEntries.push(e)}function T(n){var e=n.completion||{};e.type="normal",delete e.arg,n.completion=e}function S(n){this.tryEntries=[{tryLoc:"root"}],n.forEach(C,this),this.reset(!0)}function q(n){if(n){var t=n[i];if(t)return t.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length)){var a=-1,o=function t(){for(;++a<n.length;)if(r.call(n,a))return t.value=n[a],t.done=!1,t;return t.value=e,t.done=!0,t};return o.next=o}}return{next:P}}function P(){return{value:e,done:!0}}return v.prototype=b,s(g,"constructor",b),s(b,"constructor",v),v.displayName=s(b,c,"GeneratorFunction"),n.isGeneratorFunction=function(n){var e="function"==typeof n&&n.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},n.mark=function(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,b):(n.__proto__=b,s(n,c,"GeneratorFunction")),n.prototype=Object.create(g),n},n.awrap=function(n){return{__await:n}},w(k.prototype),s(k.prototype,o,(function(){return this})),n.AsyncIterator=k,n.async=function(e,t,r,a,i){void 0===i&&(i=Promise);var o=new k(u(e,t,r,a),i);return n.isGeneratorFunction(t)?o:o.next().then((function(n){return n.done?n.value:o.next()}))},w(g),s(g,c,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),n.keys=function(n){var e=[];for(var t in n)e.push(t);return e.reverse(),function t(){for(;e.length;){var r=e.pop();if(r in n)return t.value=r,t.done=!1,t}return t.done=!0,t}},n.values=q,S.prototype={constructor:S,reset:function(n){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!n)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=e)},stop:function(){this.done=!0;var n=this.tryEntries[0].completion;if("throw"===n.type)throw n.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var t=this;function a(r,a){return c.type="throw",c.arg=n,t.next=r,a&&(t.method="next",t.arg=e),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],c=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(n,e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===n||"continue"===n)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=n,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(o)},complete:function(n,e){if("throw"===n.type)throw n.arg;return"break"===n.type||"continue"===n.type?this.next=n.arg:"return"===n.type?(this.rval=this.arg=n.arg,this.method="return",this.next="end"):"normal"===n.type&&e&&(this.next=e),y},finish:function(n){for(var e=this.tryEntries.length-1;e>=0;--e){var t=this.tryEntries[e];if(t.finallyLoc===n)return this.complete(t.completion,t.afterLoc),T(t),y}},catch:function(n){for(var e=this.tryEntries.length-1;e>=0;--e){var t=this.tryEntries[e];if(t.tryLoc===n){var r=t.completion;if("throw"===r.type){var a=r.arg;T(t)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(n,t,r){return this.delegate={iterator:q(n),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=e),y}},n}(n.exports);try{regeneratorRuntime=e}catch(n){"object"==typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}}(p);var f=p.exports;function h(n,e,t){return n.length>0&&(!t||-1===t||e.length<t)}function y(n,e,t){var r=void 0===t||-1===t||0!==t&&e.length<t;return Boolean(n)&&r}var m=["headers"],v=function(){function n(n){this.options=void 0;var e=n||{},t=e.headers,r=u(e,m);this.options=s({headers:s({},{"Content-Type":"application/json","x-nacelle-sdk-version":""},t)},{timeout:24e4},r)}var e=n.prototype;return e.get=function(){var n=c(f.mark((function n(e){var t;return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i.default(e,s({},this.options,{method:"GET"}));case 2:return t=n.sent,n.next=5,t.json();case 5:return n.abrupt("return",{headers:t.headers,status:t.status,statusText:t.statusText,data:n.sent});case 7:case"end":return n.stop()}}),n,this)})));return function(e){return n.apply(this,arguments)}}(),e.post=function(){var n=c(f.mark((function n(e,t){var r;return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i.default(e,s({},this.options,{method:"POST",body:JSON.stringify(t)}));case 2:return r=n.sent,n.next=5,r.json();case 5:return n.abrupt("return",{headers:r.headers,status:r.status,statusText:r.statusText,data:n.sent});case 7:case"end":return n.stop()}}),n,this)})));return function(e,t){return n.apply(this,arguments)}}(),n}(),b=function(n){return Boolean(n.errors&&n.errors.length>0)},E=function(n,e){var t="Storefront GraphQL Error:";if(e&&e.length>0){var r=e.reduce((function(n,e){var t;return"UNAUTHENTICATED"===(null==(t=e.extensions)?void 0:t.code)?n.unauthenticated.push(e):n.otherErrors.push(e),n}),{unauthenticated:[],otherErrors:[]}),a=r.otherErrors;throw r.unauthenticated.forEach((function(e){(e.message.indexOf("x-nacelle-space-token")>-1||e.message.indexOf("Token is invalid")>-1)&&(t+=" The Storefront SDK client is trying to use an invalid Storefront API token, "+n.token+", for "+n.endpoint+".\nPlease verify that the client is initialized with the correct token parameter.'")})),a.forEach((function(n,e,r){var a=(n.extensions||{}).nacelleErrorId;t+=(r.length>1?" ("+(e+1)+" of "+r.length+") ":"")+n.message+(a?" (Error Ref Id: "+a+")":"")})),n.debugMode&&console.info("Storefront SDK Debug: GraphQL Error Details",JSON.stringify(e)),new Error(t)}};function x(n){return n?n.map((function(n){return n.node})):[]}function I(n){return n&&n.length>0?n[n.length-1].cursor:void 0}function g(n,e,t){var r;return s({},n,((r={})[t]=x(n[e].edges),r))}function w(n){return Boolean(n&&void 0!==n.startAfterEntryId&&n.startAfterEntryId.length>0)}var k,A,C,T=["cursor","startAfterEntryId","nacelleEntryIds","handles","locale","maxReturnedEntries","advancedOptions","edgesToNodes"],S=function(){function n(n){this.token=void 0,this.endpoint=void 0,this.locale=void 0,this.httpClient=void 0,this.debugMode=void 0,this.endpoint=n.endpoint,this.token=n.token,this.locale=n.locale,this.debugMode=n.debugMode||!1,this.debugMode&&console.info("credentials:",{endpoint:this.endpoint,token:this.token}),this.httpClient=n.httpClient||new v({headers:{"x-nacelle-space-token":this.token}})}var e=n.prototype;return e.request=function(){var n=c(f.mark((function n(e){var t,r,a,i,o,c;return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r=e.queryName,i={query:t=e.query,variables:a=e.variables},this.debugMode&&console.info("storefront request",{query:JSON.stringify(t),variables:JSON.stringify(a)}),n.next=6,this.httpClient.post(this.endpoint,i);case 6:if(!(o=n.sent)){n.next=18;break}if(b(c=o.data)&&E(this,c.errors),!c.data){n.next=17;break}if(!r||"undefined"===c.data[r]){n.next=14;break}return n.abrupt("return",{success:!0,data:c.data[r]});case 14:if(r){n.next=17;break}return n.abrupt("return",{success:!0,data:c.data});case 17:throw new Error("Response did not include "+r+".\n          "+JSON.stringify(c,null,2));case 18:throw new Error("No valid response from "+r);case 21:return n.prev=21,n.t0=n.catch(0),n.abrupt("return",{success:!1,error:n.t0.message,data:null});case 24:case"end":return n.stop()}}),n,this,[[0,21]])})));return function(e){return n.apply(this,arguments)}}(),e.requestCollectionEntries=function(){var n=c(f.mark((function n(e){var t,r,a,i,o,c,u,l,d,p,m,v,b,E,g,k,A,C,T,S,q,P,N,$,F,O,M;return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.query,a=e.queryName,i=e.key,o=(t=e.params).cursor,u=t.handle,l=t.startAfterEntryId,p=void 0===(d=t.maxReturnedEntries)?25:d,m=t.locale,v=t.advancedOptions,E=void 0===(b=t.edgesToNodes)||b,(c=t.collectionEntryId)&&u&&console.warn("You have supplied both a collectionEntryId and handle. This method will use collectionEntryId for querying."),c||u){n.next=5;break}throw new Error("You must provide either a collectionEntryId or handle.");case 5:(g=w(t))&&console.warn("You are using the parameter, startAfterEntryId, for a deprecated \nStorefront API query, "+a+". This method and query will still return \nresults, but you will have better improved results and pagination support \nusing the parameter, cursor, instead."),k=Math.min.apply(Math,[(null==v?void 0:v.entriesPerPage)||25,p].filter((function(n){return n>0}))),A=g?l:o,C=[],T=!1;case 11:return n.next=13,this.request({query:r,queryName:a,variables:s({filter:s({},c&&{nacelleEntryIds:[c]},!c&&u?{handles:[u]}:{},m?{locale:m}:{locale:this.locale}),entriesFirst:k},A&&{entriesAfter:A})});case 13:if(!(S=n.sent).success||!S.data){n.next=18;break}g?(q=S.data[0][i])&&(C=C.concat(q),A=q.length>0?q[q.length-1].nacelleEntryId:void 0,T=h(q,C,p)):0===(P=S.data.edges).length?console.warn("No collections matching query"):(N=x(P)[0],($=N[i])&&(F=$.edges,O=$.pageInfo.hasNextPage,M=E?x(F):F,C=C.concat(M),A=I(F),T=y(O,C,p))),n.next=19;break;case 18:throw new Error(S.error);case 19:if(T){n.next=11;break}case 20:return n.abrupt("return",C);case 21:case"end":return n.stop()}}),n,this)})));return function(e){return n.apply(this,arguments)}}(),e.requestEntries=function(){var n=c(f.mark((function n(e,t,r){var a,i,o,c,l,d,p,m,v,b,E,g,k,A,C,S,q,P,N,$,F,O,M,L,R,U,_,j,B,D,G,H,Y,z;return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=(a=r||{}).cursor,o=a.startAfterEntryId,c=a.nacelleEntryIds,l=a.handles,d=a.locale,m=void 0===(p=a.maxReturnedEntries)?-1:p,v=a.advancedOptions,E=void 0===(b=a.edgesToNodes)||b,g=u(a,T),A=void 0===(k=(r||{}).maxReturnedEntriesPerCollection)?25:k,C=["productCollections","contentCollections","allProductCollections","allContentCollections"].includes(t),(S=w(r))&&console.warn("You are using the parameter, startAfterEntryId, for a deprecated \nStorefront API query, "+t+". This method and query will still return \nresults, but you will have better improved results and pagination support \nusing the parameter, cursor, instead."),g.maxReturnedEntriesPerCollection&&delete g.maxReturnedEntriesPerCollection,q=S?o:i,P=!0,N=[],$=s({first:Math.min.apply(Math,[(null==v?void 0:v.entriesPerPage)||250,m].filter((function(n){return n>0}))),after:q},d?{locale:d}:{locale:this.locale},g),!l&&!c){n.next=30;break}c&&l&&console.warn("You have supplied both a nacelleEntryIds and handles. This method will use nacelleEntryIds for querying."),F=(null==v?void 0:v.entriesPerPage)||(null==c?void 0:c.length)||(null==l?void 0:l.length)||250,O=0,M=(c||l||[]).length;case 14:if(!(O<M)||m>0&&!(N.length<m)){n.next=28;break}return L=(c||[]).slice(O,O+F),R=0===L.length?(l||[]).slice(O,O+F):[],n.next=19,this.request({query:e,queryName:t,variables:s({filter:s({},$,L.length>0?{nacelleEntryIds:L}:{},R.length>0?{handles:R}:{})},C&&{maxReturnedEntriesPerCollection:A})});case 19:if(!(U=n.sent).success||!U.data){n.next=24;break}S?N=N.concat(U.data):(_=U.data.edges,j=E?x(_):_,N=N.concat(j)),n.next=25;break;case 24:throw new Error(U.error);case 25:O+=F,n.next=14;break;case 28:n.next=39;break;case 30:return n.next=32,this.request({query:e,queryName:t,variables:s({filter:s({},$,{after:q})},C&&{maxReturnedEntriesPerCollection:A})});case 32:if(!(B=n.sent).success||!B.data){n.next=37;break}S?(N=N.concat(D=B.data),q=D.length>0?D[D.length-1].nacelleEntryId:void 0,P=h(D,N,m)):(H=(G=B.data).edges,Y=G.pageInfo.hasNextPage,z=E?x(H):H,N=N.concat(z),q=I(H),P=y(Y,N,m)),n.next=38;break;case 37:throw new Error(B.error);case 38:if(P){n.next=30;break}case 39:return n.abrupt("return",m>-1?N.slice(0,m):N);case 40:case"end":return n.stop()}}),n,this)})));return function(e,t,r){return n.apply(this,arguments)}}(),e.products=function(){var n=c(f.mark((function n(e){var t,r,a;return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=w(e),r=t?"\nquery products(\n  $filter: ProductFilterInput,\n) {\n  products(filter: $filter) {\n    \n  availableForSale\n  createdAt\n  indexedAt\n  metafields {\n    \n  id\n  key\n  namespace\n  value\n\n  }\n  nacelleEntryId\n  productType\n  sourceEntryId\n  sourceId\n  tags\n  updatedAt\n  vendor\n\n    variants {\n      \n  availableForSale\n  compareAtPrice\n  content {\n    \n  createdAt\n  description\n  featuredMedia {\n    \n  altText\n  id\n  mimeType\n  src\n  thumbnailSrc\n  type\n\n  }\n  fields\n  indexedAt\n  locale\n  media {\n    \n  altText\n  id\n  mimeType\n  src\n  thumbnailSrc\n  type\n\n  }\n  metafields {\n    \n  id\n  key\n  namespace\n  value\n\n  }\n  nacelleEntryId\n  productEntryId\n  productHandle\n  published\n  selectedOptions {\n    label\n    name\n    value\n  }\n  sourceEntryId\n  sourceId\n  swatchSrc\n  title\n  updatedAt\n  variantEntryId\n\n  }\n  createdAt\n  indexedAt\n  metafields {\n    \n  id\n  key\n  namespace\n  value\n\n  }\n  nacelleEntryId\n  price\n  priceCurrency\n  priceRules {\n    \n  availableTo\n  comparedAtPrice\n  handle\n  id\n  metafields {\n    \n  id\n  key\n  namespace\n  value\n\n  }\n  price\n  priceBreaks {\n    \n  metafields {\n    \n  id\n  key\n  namespace\n  value\n\n  }\n  price\n  quantityMax\n  quantityMin\n\n  }\n  priceCurrency\n  title\n\n  }\n  productEntryId\n  productHandle\n  quantityAvailable\n  sku\n  sourceEntryId\n  sourceId\n  updatedAt\n  weight\n  weightUnit\n\n    }\n    content {\n      \n  createdAt\n  description\n  featuredMedia {\n    \n  altText\n  id\n  mimeType\n  src\n  thumbnailSrc\n  type\n\n  }\n  fields\n  handle\n  indexedAt\n  locale\n  media {\n    \n  altText\n  id\n  mimeType\n  src\n  thumbnailSrc\n  type\n\n  }\n  metafields {\n    \n  id\n  key\n  namespace\n  value\n\n  }\n  nacelleEntryId\n  options {\n    \n  name\n  values\n\n  }\n  productEntryId\n  published\n  seo {\n    \n  title\n  description\n\n  }\n  sourceEntryId\n  sourceId\n  title\n  updatedAt\n\n    }\n  }\n}\n":"\nquery allProducts($filter: ProductFilterInput) {\n  allProducts(filter: $filter) {\n    pageInfo {\n      hasNextPage\n    }\n    edges {\n      cursor\n      node {\n        \n  availableForSale\n  createdAt\n  indexedAt\n  metafields {\n    \n  id\n  key\n  namespace\n  value\n\n  }\n  nacelleEntryId\n  productType\n  sourceEntryId\n  sourceId\n  tags\n  updatedAt\n  vendor\n\n        variants {\n          \n  availableForSale\n  compareAtPrice\n  content {\n    \n  createdAt\n  description\n  featuredMedia {\n    \n  altText\n  id\n  mimeType\n  src\n  thumbnailSrc\n  type\n\n  }\n  fields\n  indexedAt\n  locale\n  media {\n    \n  altText\n  id\n  mimeType\n  src\n  thumbnailSrc\n  type\n\n  }\n  metafields {\n    \n  id\n  key\n  namespace\n  value\n\n  }\n  nacelleEntryId\n  productEntryId\n  productHandle\n  published\n  selectedOptions {\n    label\n    name\n    value\n  }\n  sourceEntryId\n  sourceId\n  swatchSrc\n  title\n  updatedAt\n  variantEntryId\n\n  }\n  createdAt\n  indexedAt\n  metafields {\n    \n  id\n  key\n  namespace\n  value\n\n  }\n  nacelleEntryId\n  price\n  priceCurrency\n  priceRules {\n    \n  availableTo\n  comparedAtPrice\n  handle\n  id\n  metafields {\n    \n  id\n  key\n  namespace\n  value\n\n  }\n  price\n  priceBreaks {\n    \n  metafields {\n    \n  id\n  key\n  namespace\n  value\n\n  }\n  price\n  quantityMax\n  quantityMin\n\n  }\n  priceCurrency\n  title\n\n  }\n  productEntryId\n  productHandle\n  quantityAvailable\n  sku\n  sourceEntryId\n  sourceId\n  updatedAt\n  weight\n  weightUnit\n\n        }\n        content {\n          \n  createdAt\n  description\n  featuredMedia {\n    \n  altText\n  id\n  mimeType\n  src\n  thumbnailSrc\n  type\n\n  }\n  fields\n  handle\n  indexedAt\n  locale\n  media {\n    \n  altText\n  id\n  mimeType\n  src\n  thumbnailSrc\n  type\n\n  }\n  metafields {\n    \n  id\n  key\n  namespace\n  value\n\n  }\n  nacelleEntryId\n  options {\n    \n  name\n  values\n\n  }\n  productEntryId\n  published\n  seo {\n    \n  title\n  description\n\n  }\n  sourceEntryId\n  sourceId\n  title\n  updatedAt\n\n        }\n      }\n    }\n  }\n}\n",a=t?"products":"allProducts",n.next=5,this.requestEntries(r,a,e);case 5:return n.abrupt("return",n.sent);case 7:case"end":return n.stop()}}),n,this)})));return function(e){return n.apply(this,arguments)}}(),e.productCollections=function(){var n=c(f.mark((function n(e){var t,r,a,i,o,c;return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=void 0===(t=(e||{}).edgesToNodes)||t,a=w(e),i=a?"\nquery productCollections(\n  $filter: ProductCollectionFilterInput,\n  $maxReturnedEntriesPerCollection: Int\n) {\n  productCollections(filter: $filter) {\n    \n  createdAt\n  indexedAt\n  metafields {\n    \n  id\n  key\n  namespace\n  value\n\n  }\n  nacelleEntryId\n  sourceEntryId\n  sourceId\n  tags\n  updatedAt\n\n    content {\n      \n  collectionEntryId\n  createdAt\n  description\n  featuredMedia {\n    \n  altText\n  id\n  mimeType\n  src\n  thumbnailSrc\n  type\n\n  }\n  fields\n  handle\n  indexedAt\n  locale\n  metafields {\n    \n  id\n  key\n  namespace\n  value\n\n  }\n  nacelleEntryId\n  # published\n  sourceEntryId\n  sourceId\n  title\n  updatedAt\n\n    }\n    products(first: $maxReturnedEntriesPerCollection) {\n      \n  \n  availableForSale\n  createdAt\n  indexedAt\n  metafields {\n    \n  id\n  key\n  namespace\n  value\n\n  }\n  nacelleEntryId\n  productType\n  sourceEntryId\n  sourceId\n  tags\n  updatedAt\n  vendor\n\n  variants {\n    \n  availableForSale\n  compareAtPrice\n  content {\n    \n  createdAt\n  description\n  featuredMedia {\n    \n  altText\n  id\n  mimeType\n  src\n  thumbnailSrc\n  type\n\n  }\n  fields\n  indexedAt\n  locale\n  media {\n    \n  altText\n  id\n  mimeType\n  src\n  thumbnailSrc\n  type\n\n  }\n  metafields {\n    \n  id\n  key\n  namespace\n  value\n\n  }\n  nacelleEntryId\n  productEntryId\n  productHandle\n  published\n  selectedOptions {\n    label\n    name\n    value\n  }\n  sourceEntryId\n  sourceId\n  swatchSrc\n  title\n  updatedAt\n  variantEntryId\n\n  }\n  createdAt\n  indexedAt\n  metafields {\n    \n  id\n  key\n  namespace\n  value\n\n  }\n  nacelleEntryId\n  price\n  priceCurrency\n  priceRules {\n    \n  availableTo\n  comparedAtPrice\n  handle\n  id\n  metafields {\n    \n  id\n  key\n  namespace\n  value\n\n  }\n  price\n  priceBreaks {\n    \n  metafields {\n    \n  id\n  key\n  namespace\n  value\n\n  }\n  price\n  quantityMax\n  quantityMin\n\n  }\n  priceCurrency\n  title\n\n  }\n  productEntryId\n  productHandle\n  quantityAvailable\n  sku\n  sourceEntryId\n  sourceId\n  updatedAt\n  weight\n  weightUnit\n\n  }\n  content {\n    \n  createdAt\n  description\n  featuredMedia {\n    \n  altText\n  id\n  mimeType\n  src\n  thumbnailSrc\n  type\n\n  }\n  fields\n  handle\n  indexedAt\n  locale\n  media {\n    \n  altText\n  id\n  mimeType\n  src\n  thumbnailSrc\n  type\n\n  }\n  metafields {\n    \n  id\n  key\n  namespace\n  value\n\n  }\n  nacelleEntryId\n  options {\n    \n  name\n  values\n\n  }\n  productEntryId\n  published\n  seo {\n    \n  title\n  description\n\n  }\n  sourceEntryId\n  sourceId\n  title\n  updatedAt\n\n  }\n\n    }\n  }\n}\n":"\nquery allProductCollections(\n  $filter: ProductCollectionFilterInput,\n  $maxReturnedEntriesPerCollection: Int\n) {\n  allProductCollections(filter: $filter) {\n    pageInfo {\n      hasNextPage\n    }\n    edges {\n      cursor\n      node {\n        \n  createdAt\n  indexedAt\n  metafields {\n    \n  id\n  key\n  namespace\n  value\n\n  }\n  nacelleEntryId\n  sourceEntryId\n  sourceId\n  tags\n  updatedAt\n\n        content {\n          \n  collectionEntryId\n  createdAt\n  description\n  featuredMedia {\n    \n  altText\n  id\n  mimeType\n  src\n  thumbnailSrc\n  type\n\n  }\n  fields\n  handle\n  indexedAt\n  locale\n  metafields {\n    \n  id\n  key\n  namespace\n  value\n\n  }\n  nacelleEntryId\n  # published\n  sourceEntryId\n  sourceId\n  title\n  updatedAt\n\n        }\n        productConnection(first: $maxReturnedEntriesPerCollection) {\n          pageInfo {\n            hasNextPage\n          }\n          edges {\n            cursor\n            node {\n              \n  \n  availableForSale\n  createdAt\n  indexedAt\n  metafields {\n    \n  id\n  key\n  namespace\n  value\n\n  }\n  nacelleEntryId\n  productType\n  sourceEntryId\n  sourceId\n  tags\n  updatedAt\n  vendor\n\n  variants {\n    \n  availableForSale\n  compareAtPrice\n  content {\n    \n  createdAt\n  description\n  featuredMedia {\n    \n  altText\n  id\n  mimeType\n  src\n  thumbnailSrc\n  type\n\n  }\n  fields\n  indexedAt\n  locale\n  media {\n    \n  altText\n  id\n  mimeType\n  src\n  thumbnailSrc\n  type\n\n  }\n  metafields {\n    \n  id\n  key\n  namespace\n  value\n\n  }\n  nacelleEntryId\n  productEntryId\n  productHandle\n  published\n  selectedOptions {\n    label\n    name\n    value\n  }\n  sourceEntryId\n  sourceId\n  swatchSrc\n  title\n  updatedAt\n  variantEntryId\n\n  }\n  createdAt\n  indexedAt\n  metafields {\n    \n  id\n  key\n  namespace\n  value\n\n  }\n  nacelleEntryId\n  price\n  priceCurrency\n  priceRules {\n    \n  availableTo\n  comparedAtPrice\n  handle\n  id\n  metafields {\n    \n  id\n  key\n  namespace\n  value\n\n  }\n  price\n  priceBreaks {\n    \n  metafields {\n    \n  id\n  key\n  namespace\n  value\n\n  }\n  price\n  quantityMax\n  quantityMin\n\n  }\n  priceCurrency\n  title\n\n  }\n  productEntryId\n  productHandle\n  quantityAvailable\n  sku\n  sourceEntryId\n  sourceId\n  updatedAt\n  weight\n  weightUnit\n\n  }\n  content {\n    \n  createdAt\n  description\n  featuredMedia {\n    \n  altText\n  id\n  mimeType\n  src\n  thumbnailSrc\n  type\n\n  }\n  fields\n  handle\n  indexedAt\n  locale\n  media {\n    \n  altText\n  id\n  mimeType\n  src\n  thumbnailSrc\n  type\n\n  }\n  metafields {\n    \n  id\n  key\n  namespace\n  value\n\n  }\n  nacelleEntryId\n  options {\n    \n  name\n  values\n\n  }\n  productEntryId\n  published\n  seo {\n    \n  title\n  description\n\n  }\n  sourceEntryId\n  sourceId\n  title\n  updatedAt\n\n  }\n\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",o=a?"productCollections":"allProductCollections",n.next=6,this.requestEntries(i,o,e);case 6:if(c=n.sent,!a){n.next=9;break}return n.abrupt("return",c);case 9:if(!r){n.next=11;break}return n.abrupt("return",c.map((function(n){return g(n,"productConnection","products")})));case 11:return n.abrupt("return",c.map((function(n){return s({},n,{node:g(n.node,"productConnection","products")})})));case 12:case"end":return n.stop()}}),n,this)})));return function(e){return n.apply(this,arguments)}}(),e.content=function(){var n=c(f.mark((function n(e){var t,r,a;return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=w(e),r=t?"\nquery content(\n  $filter: ContentFilterInput\n) {\n  content(filter: $filter) {\n    \n  createdAt\n  fields\n  handle\n  indexedAt\n  locale\n  nacelleEntryId\n  published\n  sourceEntryId\n  sourceId\n  title\n  type\n  updatedAt\n\n  }\n}\n":"\nquery allContent($filter: ContentFilterInput) {\n  allContent(filter: $filter) {\n    pageInfo {\n      hasNextPage\n    }\n    edges {\n      cursor\n      node {\n        \n  createdAt\n  fields\n  handle\n  indexedAt\n  locale\n  nacelleEntryId\n  published\n  sourceEntryId\n  sourceId\n  title\n  type\n  updatedAt\n\n      }\n    }\n  }\n}\n",a=t?"content":"allContent",n.next=5,this.requestEntries(r,a,e);case 5:return n.abrupt("return",n.sent);case 7:case"end":return n.stop()}}),n,this)})));return function(e){return n.apply(this,arguments)}}(),e.contentCollections=function(){var n=c(f.mark((function n(e){var t,r,a,i,o,c;return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=void 0===(t=(e||{}).edgesToNodes)||t,a=w(e),i=a?"\nquery contentCollectionsQuery(\n  $filter: ContentCollectionFilterInput,\n  $maxReturnedEntriesPerCollection: Int\n) {\n  contentCollections(filter: $filter) {\n    \n  createdAt\n  indexedAt\n  metafields {\n    \n  id\n  key\n  namespace\n  value\n\n  }\n  nacelleEntryId\n  sourceEntryId\n  sourceId\n  tags\n  updatedAt\n\n    entries(first: $maxReturnedEntriesPerCollection) {\n      \n  createdAt\n  fields\n  handle\n  indexedAt\n  locale\n  nacelleEntryId\n  published\n  sourceEntryId\n  sourceId\n  title\n  type\n  updatedAt\n\n    }\n    content {\n      \n  collectionEntryId\n  createdAt\n  description\n  featuredMedia {\n    \n  altText\n  id\n  mimeType\n  src\n  thumbnailSrc\n  type\n\n  }\n  fields\n  handle\n  indexedAt\n  locale\n  metafields {\n    \n  id\n  key\n  namespace\n  value\n\n  }\n  nacelleEntryId\n  # published\n  sourceEntryId\n  sourceId\n  title\n  updatedAt\n\n    }\n  }\n}\n":"\nquery allContentCollectionsQuery(\n  $filter: ContentCollectionFilterInput,\n  $maxReturnedEntriesPerCollection: Int\n) {\n  allContentCollections(filter: $filter) {\n    pageInfo {\n      hasNextPage\n    }\n    edges {\n      cursor\n      node {\n        \n  createdAt\n  indexedAt\n  metafields {\n    \n  id\n  key\n  namespace\n  value\n\n  }\n  nacelleEntryId\n  sourceEntryId\n  sourceId\n  tags\n  updatedAt\n\n        contentConnection(first: $maxReturnedEntriesPerCollection) {\n          pageInfo {\n            hasNextPage\n          }\n          edges {\n            cursor\n            node {\n              \n  createdAt\n  fields\n  handle\n  indexedAt\n  locale\n  nacelleEntryId\n  published\n  sourceEntryId\n  sourceId\n  title\n  type\n  updatedAt\n\n            }\n          }\n        }\n        content {\n          \n  collectionEntryId\n  createdAt\n  description\n  featuredMedia {\n    \n  altText\n  id\n  mimeType\n  src\n  thumbnailSrc\n  type\n\n  }\n  fields\n  handle\n  indexedAt\n  locale\n  metafields {\n    \n  id\n  key\n  namespace\n  value\n\n  }\n  nacelleEntryId\n  # published\n  sourceEntryId\n  sourceId\n  title\n  updatedAt\n\n        }\n      }\n    }\n  }\n}\n",o=a?"contentCollections":"allContentCollections",n.next=6,this.requestEntries(i,o,e);case 6:if(c=n.sent,!a){n.next=9;break}return n.abrupt("return",c);case 9:if(!r){n.next=11;break}return n.abrupt("return",c.map((function(n){return g(n,"contentConnection","entries")})));case 11:return n.abrupt("return",c.map((function(n){return s({},n,{node:g(n.node,"contentConnection","entries")})})));case 12:case"end":return n.stop()}}),n,this)})));return function(e){return n.apply(this,arguments)}}(),e.navigation=function(){var n=c(f.mark((function n(e){var t,r;return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t={query:"\nfragment NavigationItem on NavigationGroupItem {\n\ttitle\n\turl\n}\n\nquery ($filter: NavigationFilterInput) {\n\tnavigation(filter: $filter) {\n\t\tgroupId\n\t\ttitle\n\t\tupdatedAt\n\t\tupdatedBy\n\t\titems {\n\t\t\t...NavigationItem\n\t\t\titems {\n\t\t\t\t...NavigationItem\n\t\t\t\titems {\n\t\t\t\t\t...NavigationItem\n\t\t\t\t\titems {\n\t\t\t\t\t\t...NavigationItem\n\t\t\t\t\t\titems {\n\t\t\t\t\t\t\t...NavigationItem\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\n",queryName:"navigation"},e&&(t.variables={filter:e}),n.next=4,this.request(t);case 4:if(!(r=n.sent).success||!r.data){n.next=7;break}return n.abrupt("return",r.data);case 7:throw new Error(r.error);case 8:case"end":return n.stop()}}),n,this)})));return function(e){return n.apply(this,arguments)}}(),e.query=function(){var n=c(f.mark((function n(e){var t,r,a;return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.query,r=e.variables,n.next=3,this.request({query:t,variables:r});case 3:if(!(a=n.sent).success||!a.data){n.next=6;break}return n.abrupt("return",a.data);case 6:throw new Error(a.error);case 7:case"end":return n.stop()}}),n,this)})));return function(e){return n.apply(this,arguments)}}(),e.spaceProperties=function(){var n=c(f.mark((function n(){var e;return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.request({query:"\nquery {\n  spaceProperties {\n\t\tproperties {\n\t\t\titems {\n\t\t\t\tkey\n\t\t\t\tvalue\n\t\t\t}\n\t\t\tnamespace\n\t\t}\n\t\tupdatedAt\n\t\tupdatedBy\n\t}\n}\n",queryName:"spaceProperties"});case 2:if(!(e=n.sent).success||!e.data){n.next=5;break}return n.abrupt("return",e.data);case 5:throw new Error(e.error);case 6:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}(),e.productCollectionEntries=function(){var n=c(f.mark((function n(e){var t;return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=w(e),n.abrupt("return",this.requestCollectionEntries({query:t?"\nquery productCollectionEntries(\n  $filter: ProductCollectionFilterInput,\n  $entriesFirst: Int,\n  $entriesAfter: String\n) {\n  productCollections(filter: $filter) {\n    products(first: $entriesFirst, after: $entriesAfter) {\n      \n  \n  availableForSale\n  createdAt\n  indexedAt\n  metafields {\n    \n  id\n  key\n  namespace\n  value\n\n  }\n  nacelleEntryId\n  productType\n  sourceEntryId\n  sourceId\n  tags\n  updatedAt\n  vendor\n\n  variants {\n    \n  availableForSale\n  compareAtPrice\n  content {\n    \n  createdAt\n  description\n  featuredMedia {\n    \n  altText\n  id\n  mimeType\n  src\n  thumbnailSrc\n  type\n\n  }\n  fields\n  indexedAt\n  locale\n  media {\n    \n  altText\n  id\n  mimeType\n  src\n  thumbnailSrc\n  type\n\n  }\n  metafields {\n    \n  id\n  key\n  namespace\n  value\n\n  }\n  nacelleEntryId\n  productEntryId\n  productHandle\n  published\n  selectedOptions {\n    label\n    name\n    value\n  }\n  sourceEntryId\n  sourceId\n  swatchSrc\n  title\n  updatedAt\n  variantEntryId\n\n  }\n  createdAt\n  indexedAt\n  metafields {\n    \n  id\n  key\n  namespace\n  value\n\n  }\n  nacelleEntryId\n  price\n  priceCurrency\n  priceRules {\n    \n  availableTo\n  comparedAtPrice\n  handle\n  id\n  metafields {\n    \n  id\n  key\n  namespace\n  value\n\n  }\n  price\n  priceBreaks {\n    \n  metafields {\n    \n  id\n  key\n  namespace\n  value\n\n  }\n  price\n  quantityMax\n  quantityMin\n\n  }\n  priceCurrency\n  title\n\n  }\n  productEntryId\n  productHandle\n  quantityAvailable\n  sku\n  sourceEntryId\n  sourceId\n  updatedAt\n  weight\n  weightUnit\n\n  }\n  content {\n    \n  createdAt\n  description\n  featuredMedia {\n    \n  altText\n  id\n  mimeType\n  src\n  thumbnailSrc\n  type\n\n  }\n  fields\n  handle\n  indexedAt\n  locale\n  media {\n    \n  altText\n  id\n  mimeType\n  src\n  thumbnailSrc\n  type\n\n  }\n  metafields {\n    \n  id\n  key\n  namespace\n  value\n\n  }\n  nacelleEntryId\n  options {\n    \n  name\n  values\n\n  }\n  productEntryId\n  published\n  seo {\n    \n  title\n  description\n\n  }\n  sourceEntryId\n  sourceId\n  title\n  updatedAt\n\n  }\n\n    }\n  }\n}\n":"\nquery productCollectionEntries(\n  $filter: ProductCollectionFilterInput,\n  $entriesFirst: Int,\n  $entriesAfter: String\n) {\n  allProductCollections(filter: $filter) {\n    edges {\n      node {\n        productConnection(first: $entriesFirst, after: $entriesAfter) {\n          pageInfo {\n            hasNextPage\n          }\n          edges {\n            cursor\n            node {\n              \n  \n  availableForSale\n  createdAt\n  indexedAt\n  metafields {\n    \n  id\n  key\n  namespace\n  value\n\n  }\n  nacelleEntryId\n  productType\n  sourceEntryId\n  sourceId\n  tags\n  updatedAt\n  vendor\n\n  variants {\n    \n  availableForSale\n  compareAtPrice\n  content {\n    \n  createdAt\n  description\n  featuredMedia {\n    \n  altText\n  id\n  mimeType\n  src\n  thumbnailSrc\n  type\n\n  }\n  fields\n  indexedAt\n  locale\n  media {\n    \n  altText\n  id\n  mimeType\n  src\n  thumbnailSrc\n  type\n\n  }\n  metafields {\n    \n  id\n  key\n  namespace\n  value\n\n  }\n  nacelleEntryId\n  productEntryId\n  productHandle\n  published\n  selectedOptions {\n    label\n    name\n    value\n  }\n  sourceEntryId\n  sourceId\n  swatchSrc\n  title\n  updatedAt\n  variantEntryId\n\n  }\n  createdAt\n  indexedAt\n  metafields {\n    \n  id\n  key\n  namespace\n  value\n\n  }\n  nacelleEntryId\n  price\n  priceCurrency\n  priceRules {\n    \n  availableTo\n  comparedAtPrice\n  handle\n  id\n  metafields {\n    \n  id\n  key\n  namespace\n  value\n\n  }\n  price\n  priceBreaks {\n    \n  metafields {\n    \n  id\n  key\n  namespace\n  value\n\n  }\n  price\n  quantityMax\n  quantityMin\n\n  }\n  priceCurrency\n  title\n\n  }\n  productEntryId\n  productHandle\n  quantityAvailable\n  sku\n  sourceEntryId\n  sourceId\n  updatedAt\n  weight\n  weightUnit\n\n  }\n  content {\n    \n  createdAt\n  description\n  featuredMedia {\n    \n  altText\n  id\n  mimeType\n  src\n  thumbnailSrc\n  type\n\n  }\n  fields\n  handle\n  indexedAt\n  locale\n  media {\n    \n  altText\n  id\n  mimeType\n  src\n  thumbnailSrc\n  type\n\n  }\n  metafields {\n    \n  id\n  key\n  namespace\n  value\n\n  }\n  nacelleEntryId\n  options {\n    \n  name\n  values\n\n  }\n  productEntryId\n  published\n  seo {\n    \n  title\n  description\n\n  }\n  sourceEntryId\n  sourceId\n  title\n  updatedAt\n\n  }\n\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",queryName:t?"productCollections":"allProductCollections",key:t?"products":"productConnection",params:e}));case 5:case"end":return n.stop()}}),n,this)})));return function(e){return n.apply(this,arguments)}}(),e.contentCollectionEntries=function(){var n=c(f.mark((function n(e){var t;return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=w(e),n.abrupt("return",this.requestCollectionEntries({query:t?"\nquery contentCollectionEntries(\n  $filter: ContentCollectionFilterInput,\n  $contentFirst: Int,\n  $contentAfter: String\n) {\n  contentCollections(filter: $filter) {\n    entries(first: $contentFirst, after: $contentAfter) {\n      \n  createdAt\n  fields\n  handle\n  indexedAt\n  locale\n  nacelleEntryId\n  published\n  sourceEntryId\n  sourceId\n  title\n  type\n  updatedAt\n\n    }\n  }\n}\n":"\nquery contentCollectionEntries(\n  $filter: ContentCollectionFilterInput,\n  $entriesFirst: Int,\n  $entriesAfter: String\n) {\n  allContentCollections(filter: $filter) {\n    edges {\n      node {\n        contentConnection(first: $entriesFirst, after: $entriesAfter) {\n          pageInfo {\n            hasNextPage\n          }\n          edges {\n            cursor\n            node {\n              \n  createdAt\n  fields\n  handle\n  indexedAt\n  locale\n  nacelleEntryId\n  published\n  sourceEntryId\n  sourceId\n  title\n  type\n  updatedAt\n\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",queryName:t?"contentCollections":"allContentCollections",key:t?"entries":"contentConnection",params:e}));case 5:case"end":return n.stop()}}),n,this)})));return function(e){return n.apply(this,arguments)}}(),n}(),q=function(n){var a=this;this.token=void 0,this.endpoint=void 0,this.wsClient=void 0,this.debugMode=void 0,this.subscribeToProductUpdate=function(n,e){if(!a.wsClient)throw new Error("No wsClient");try{return r.pipe(a.wsClient.subscription("\nsubscription Subscription($productInventoryUpdatedFilter: InventoryItemsSubscriptionFilterInput) {\n  productInventoryUpdated (filter: $productInventoryUpdatedFilter) {\n    nacelleEntryId\n    entryType\n    availableForSale\n  }\n}",{productInventoryUpdatedFilter:{nacelleEntryIds:e}}),r.subscribe((function(e){e.error?n.onError(e):n.onNext(e)}))).unsubscribe}catch(e){return n.onError(e),function(){}}},this.subscribeToProductVariantUpdate=function(n,e){if(!a.wsClient)throw new Error("No wsClient");try{return r.pipe(a.wsClient.subscription("subscription Subscription($variantInventoryUpdatedFilter: InventoryItemsSubscriptionFilterInput) {\n    variantInventoryUpdated (filter: $variantInventoryUpdatedFilter) {\n      nacelleEntryId\n      entryType\n      availableForSale\n    }\n  }",{variantInventoryUpdatedFilter:{nacelleEntryIds:e}}),r.subscribe((function(e){e.error?n.onError(e):n.onNext(e)}))).unsubscribe}catch(e){return n.onError(e),function(){}}},this.endpoint=n.endpoint,this.token=n.token,this.debugMode=n.debugMode||!1,this.debugMode&&console.info("credentials:",{endpoint:this.endpoint,token:this.token});var i=t.createClient({url:this.endpoint,connectionParams:{"x-nacelle-tether-access-token":this.token},isFatalConnectionProblem:function(n){return 4403===n.code&&(console.error("Websocket server rejecting auth, check headers for correct x-nacelle-space-id and x-nacelle-tether-access-token"),!0)}});this.wsClient=n.wsClient||e.createClient({url:this.endpoint,exchanges:[].concat(e.defaultExchanges,[e.subscriptionExchange({forwardSubscription:function(n){return{subscribe:function(e){return{unsubscribe:i.subscribe(n,e)}}}}})])})};function P(n){if(void 0===n.token||0===n.token.length)throw new Error("Nacelle space token is required.");if(void 0===n.storefrontEndpoint||0===n.storefrontEndpoint.length)throw new Error("Nacelle endpoint is required");var e=n.locale||"en-US",t=void 0!==n.debugMode&&n.debugMode;t&&console.info("🙌  Storefront Debug Mode Unlocked! 🙌");var r=n.connector||new S({token:n.token,endpoint:n.storefrontEndpoint,locale:e,debugMode:t}),a=void 0;n.subscriptionToken&&n.subscriptionEndpoint&&(a=new q({token:n.subscriptionToken||"",endpoint:n.subscriptionEndpoint||"",debugMode:t}));var i,o,s,u,l,p,h,y,m,v=n.currencyCode||"USD",b=n.onDataError||null,E=[];function x(n,e){return I.apply(this,arguments)}function I(){return(I=c(f.mark((function n(e,t){var r,a,i,o,c;return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=t,a=E.filter((function(n){return n.method===e})),i=d(a);case 3:if((o=i()).done){n.next=10;break}return c=o.value,n.next=7,c.callback(r);case 7:r=n.sent;case 8:n.next=3;break;case 10:return n.abrupt("return",r);case 11:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return{getConfig:function(){return{token:n.token,storefrontEndpoint:n.storefrontEndpoint,locale:e,currencyCode:v,afterSubscriptions:E}},products:(m=c(f.mark((function n(e){return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,r.products(e);case 3:return n.abrupt("return",x("products",n.sent));case 7:if(n.prev=7,n.t0=n.catch(0),!b){n.next=11;break}return n.abrupt("return",b({method:"products",params:e||null,error:n.t0}));case 11:throw n.t0;case 12:case"end":return n.stop()}}),n,null,[[0,7]])}))),function(n){return m.apply(this,arguments)}),productCollections:(y=c(f.mark((function n(e){return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.info("storefront client, productCollections"),n.prev=1,n.next=4,r.productCollections(e);case 4:return n.abrupt("return",x("productCollections",n.sent));case 8:if(n.prev=8,n.t0=n.catch(1),!b){n.next=12;break}return n.abrupt("return",b({method:"productCollections",params:e||null,error:n.t0}));case 12:throw n.t0;case 13:case"end":return n.stop()}}),n,null,[[1,8]])}))),function(n){return y.apply(this,arguments)}),productCollectionEntries:(h=c(f.mark((function n(e){return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.info("storefront client, productCollectionEntries"),n.prev=1,n.next=4,r.productCollectionEntries(e);case 4:return n.abrupt("return",x("productCollectionEntries",n.sent));case 8:if(n.prev=8,n.t0=n.catch(1),!b){n.next=12;break}return n.abrupt("return",b({method:"productCollectionEntries",params:e||null,error:n.t0}));case 12:throw n.t0;case 13:case"end":return n.stop()}}),n,null,[[1,8]])}))),function(n){return h.apply(this,arguments)}),contentCollectionEntries:(p=c(f.mark((function n(e){return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.info("storefront client, contentCollectionEntries"),n.prev=1,n.next=4,r.contentCollectionEntries(e);case 4:return n.abrupt("return",x("contentCollectionEntries",n.sent));case 8:if(n.prev=8,n.t0=n.catch(1),!b){n.next=12;break}return n.abrupt("return",b({method:"contentCollectionEntries",params:e||null,error:n.t0}));case 12:throw n.t0;case 13:case"end":return n.stop()}}),n,null,[[1,8]])}))),function(n){return p.apply(this,arguments)}),content:(l=c(f.mark((function n(e){return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,r.content(e);case 3:return n.abrupt("return",x("content",n.sent));case 7:if(n.prev=7,n.t0=n.catch(0),!b){n.next=11;break}return n.abrupt("return",b({method:"content",params:e||null,error:n.t0}));case 11:throw n.t0;case 12:case"end":return n.stop()}}),n,null,[[0,7]])}))),function(n){return l.apply(this,arguments)}),contentCollections:(u=c(f.mark((function n(e){return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,r.contentCollections(e);case 3:return n.abrupt("return",x("contentCollections",n.sent));case 7:if(n.prev=7,n.t0=n.catch(0),!b){n.next=11;break}return n.abrupt("return",b({method:"contentCollections",params:e||null,error:n.t0}));case 11:throw n.t0;case 12:case"end":return n.stop()}}),n,null,[[0,7]])}))),function(n){return u.apply(this,arguments)}),productSubscription:function(n,e){var t;if(!a)throw Error("The params subscriptionToken && subscriptionEndpoint were not all provided");return null==(t=a)?void 0:t.subscribeToProductUpdate(n,e)},productVariantSubscription:function(n,e){var t;if(!a)throw Error("The params subscriptionToken && subscriptionEndpoint were not all provided");return null==(t=a)?void 0:t.subscribeToProductVariantUpdate(n,e)},query:(s=c(f.mark((function n(e){return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,r.query(e);case 3:return n.abrupt("return",x("query",n.sent));case 7:if(n.prev=7,n.t0=n.catch(0),!b){n.next=11;break}return n.abrupt("return",b({method:"query",params:e,error:n.t0}));case 11:throw n.t0;case 12:case"end":return n.stop()}}),n,null,[[0,7]])}))),function(n){return s.apply(this,arguments)}),navigation:(o=c(f.mark((function n(e){return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,r.navigation(e);case 3:return n.abrupt("return",x("navigation",n.sent));case 7:if(n.prev=7,n.t0=n.catch(0),!b){n.next=11;break}return n.abrupt("return",b({method:"navigation",params:e||null,error:n.t0}));case 11:throw n.t0;case 12:case"end":return n.stop()}}),n,null,[[0,7]])}))),function(n){return o.apply(this,arguments)}),spaceProperties:(i=c(f.mark((function n(){return f.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,r.spaceProperties();case 3:return n.abrupt("return",x("spaceProperties",n.sent));case 7:if(n.prev=7,n.t0=n.catch(0),!b){n.next=11;break}return n.abrupt("return",b({method:"spaceProperties",params:null,error:n.t0}));case 11:throw n.t0;case 12:case"end":return n.stop()}}),n,null,[[0,7]])}))),function(){return i.apply(this,arguments)}),after:function(n,e){E.push({method:n,callback:e})}}}exports.EntryType=void 0,(k=exports.EntryType||(exports.EntryType={})).PRODUCT="product",k.PRODUCT_CONTENT="product-content",k.VARIANT="variant",k.VARIANT_CONTENT="variant-content",k.CONTENT="content",k.CONTENT_COLLECTION="content-collection",k.PRODUCT_COLLECTION="product-collection",k.COLLECTION_CONTENT="collection-content",exports.DataSourceName=void 0,(A=exports.DataSourceName||(exports.DataSourceName={})).SHOPIFY="shopify",A.CONTENTFUL="contentful",A.SANITY="sanity",exports.Locales=void 0,(C=exports.Locales||(exports.Locales={})).en="en",C.en_US="en-US",C.en_GB="en-GB",C.fr="fr",C.de="de",C.pl="pl",C.nl="nl",C.fi="fi",C.sv="sv",C.it="it",C.es="es",C.pt="pt",C.ru="ru",C.pt_BR="pt-BR",C.es_MX="es-MX",C.zh_CN="zh-CN",C.zh_TW="zh-TW",C.jp="ja",C.ko="ko",exports.Storefront=P,exports.default=P;
//# sourceMappingURL=storefront-sdk.cjs.production.min.js.map
