import { Edge } from '../types';

export function keepFetchingItems<T>(
  fetchedItems: T[],
  totalItems: T[],
  maxReturnedEntries: number | undefined
): boolean {
  const lessItemsThanRequested = maxReturnedEntries
    ? maxReturnedEntries === -1 || totalItems.length < maxReturnedEntries
    : true;
  return fetchedItems.length > 0 && lessItemsThanRequested;
}

export function keepFetchingItemsUsingNextPage<T>(
  hasNextPage: boolean | null | undefined,
  totalItems: Array<T | Edge<T>>,
  maxReturnedEntries: number | undefined
): boolean {
  const lessItemsThanRequested =
    typeof maxReturnedEntries === 'undefined' || maxReturnedEntries === -1
      ? true
      : maxReturnedEntries !== 0 && totalItems.length < maxReturnedEntries;
  return Boolean(hasNextPage) && lessItemsThanRequested;
}
