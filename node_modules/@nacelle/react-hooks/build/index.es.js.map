{"version":3,"file":"index.es.js","sources":["../../../node_modules/tslib/tslib.es6.js","../../../node_modules/idb-keyval/dist/esm/index.js","../../../node_modules/safari-14-idb-fix/dist/esm-compat/index.js","../src/hooks/use-cart/utils/index.ts","../src/hooks/use-cart/actions/addToCart.ts","../src/hooks/use-cart/use-cart.reducer.ts","../src/hooks/use-cart/actions/initCart.ts","../src/hooks/use-cart/actions/updateItem.ts","../src/hooks/use-cart/actions/removeFromCart.ts","../src/hooks/use-cart/actions/incrementItem.ts","../src/hooks/use-cart/actions/decrementItem.ts","../src/hooks/use-cart/actions/clearCart.ts","../src/hooks/use-cart/actions/toggleCart.ts","../src/hooks/use-cart/use-cart.provider.tsx","../src/hooks/use-cart/index.ts","../src/hooks/use-checkout/utils/index.ts","../src/hooks/use-checkout/actions/clearCheckoutData.ts","../src/hooks/use-checkout/use-checkout.reducer.ts","../src/hooks/use-checkout/actions/setGetCheckoutData.ts","../src/hooks/use-checkout/actions/setGetCheckoutError.ts","../src/hooks/use-checkout/actions/setProcessCheckoutData.ts","../src/hooks/use-checkout/actions/setProcessCheckoutError.ts","../src/hooks/use-checkout/use-checkout.provider.tsx","../src/hooks/use-checkout/index.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n","import safariFix from 'safari-14-idb-fix';\n\nfunction promisifyRequest(request) {\n    return new Promise((resolve, reject) => {\n        // @ts-ignore - file size hacks\n        request.oncomplete = request.onsuccess = () => resolve(request.result);\n        // @ts-ignore - file size hacks\n        request.onabort = request.onerror = () => reject(request.error);\n    });\n}\nfunction createStore(dbName, storeName) {\n    const dbp = safariFix().then(() => {\n        const request = indexedDB.open(dbName);\n        request.onupgradeneeded = () => request.result.createObjectStore(storeName);\n        return promisifyRequest(request);\n    });\n    return (txMode, callback) => dbp.then((db) => callback(db.transaction(storeName, txMode).objectStore(storeName)));\n}\nlet defaultGetStoreFunc;\nfunction defaultGetStore() {\n    if (!defaultGetStoreFunc) {\n        defaultGetStoreFunc = createStore('keyval-store', 'keyval');\n    }\n    return defaultGetStoreFunc;\n}\n/**\n * Get a value by its key.\n *\n * @param key\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction get(key, customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => promisifyRequest(store.get(key)));\n}\n/**\n * Set a value with a key.\n *\n * @param key\n * @param value\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction set(key, value, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        store.put(value, key);\n        return promisifyRequest(store.transaction);\n    });\n}\n/**\n * Set multiple values at once. This is faster than calling set() multiple times.\n * It's also atomic â€“ if one of the pairs can't be added, none will be added.\n *\n * @param entries Array of entries, where each entry is an array of `[key, value]`.\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction setMany(entries, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        entries.forEach((entry) => store.put(entry[1], entry[0]));\n        return promisifyRequest(store.transaction);\n    });\n}\n/**\n * Get multiple values by their keys\n *\n * @param keys\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction getMany(keys, customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => Promise.all(keys.map((key) => promisifyRequest(store.get(key)))));\n}\n/**\n * Update a value. This lets you see the old value and update it as an atomic operation.\n *\n * @param key\n * @param updater A callback that takes the old value and returns a new value.\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction update(key, updater, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => \n    // Need to create the promise manually.\n    // If I try to chain promises, the transaction closes in browsers\n    // that use a promise polyfill (IE10/11).\n    new Promise((resolve, reject) => {\n        store.get(key).onsuccess = function () {\n            try {\n                store.put(updater(this.result), key);\n                resolve(promisifyRequest(store.transaction));\n            }\n            catch (err) {\n                reject(err);\n            }\n        };\n    }));\n}\n/**\n * Delete a particular key from the store.\n *\n * @param key\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction del(key, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        store.delete(key);\n        return promisifyRequest(store.transaction);\n    });\n}\n/**\n * Clear all values in the store.\n *\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction clear(customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        store.clear();\n        return promisifyRequest(store.transaction);\n    });\n}\nfunction eachCursor(customStore, callback) {\n    return customStore('readonly', (store) => {\n        // This would be store.getAllKeys(), but it isn't supported by Edge or Safari.\n        // And openKeyCursor isn't supported by Safari.\n        store.openCursor().onsuccess = function () {\n            if (!this.result)\n                return;\n            callback(this.result);\n            this.result.continue();\n        };\n        return promisifyRequest(store.transaction);\n    });\n}\n/**\n * Get all keys in the store.\n *\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction keys(customStore = defaultGetStore()) {\n    const items = [];\n    return eachCursor(customStore, (cursor) => items.push(cursor.key)).then(() => items);\n}\n/**\n * Get all values in the store.\n *\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction values(customStore = defaultGetStore()) {\n    const items = [];\n    return eachCursor(customStore, (cursor) => items.push(cursor.value)).then(() => items);\n}\n/**\n * Get all entries in the store. Each entry is an array of `[key, value]`.\n *\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction entries(customStore = defaultGetStore()) {\n    const items = [];\n    return eachCursor(customStore, (cursor) => items.push([cursor.key, cursor.value])).then(() => items);\n}\n\nexport { clear, createStore, del, entries, get, getMany, keys, promisifyRequest, set, setMany, update, values };\n","/**\n * https://bugs.webkit.org/show_bug.cgi?id=226547\n * Safari has a horrible bug where IDB requests can hang while the browser is starting up.\n * The only solution is to keep nudging it until it's awake.\n * This probably creates garbage, but garbage is better than totally failing.\n */\nfunction idbReady() {\n  var isSafari = !navigator.userAgentData && /Safari\\//.test(navigator.userAgent) && !/Chrom(e|ium)\\//.test(navigator.userAgent); // No point putting other browsers or older versions of Safari through this mess.\n\n  if (!isSafari || !indexedDB.databases) return Promise.resolve();\n  var intervalId;\n  return new Promise(function (resolve) {\n    var tryIdb = function tryIdb() {\n      return indexedDB.databases().finally(resolve);\n    };\n\n    intervalId = setInterval(tryIdb, 100);\n    tryIdb();\n  }).finally(function () {\n    return clearInterval(intervalId);\n  });\n}\n\nexport default idbReady;\n","import { set, del } from 'idb-keyval';\nimport { CartItem } from '../../common/types';\nimport { LegacyCartItem, StorageTypes } from '../use-cart.types';\n\n/**\n * A utility function which will return true if the item is already in the cart\n *\n * @param cart the current cart state\n * @param payload a Shopify item\n *\n * @returns a boolean indiciating if the item is already in the cart\n */\nexport function isItemInCart(cart: CartItem[], payload: CartItem): boolean {\n  return cart.findIndex((item) => item.variant.id === payload.variant?.id) > -1;\n}\n\nexport function setCacheItem(storage: StorageTypes | null) {\n  switch (storage) {\n    case 'local': {\n      return window.localStorage.setItem.bind(localStorage);\n    }\n\n    case 'session': {\n      return window.sessionStorage.setItem.bind(sessionStorage);\n    }\n\n    case 'idb': {\n      return (key: string, value: string) => set(key, value);\n    }\n\n    default: {\n      return () => {};\n    }\n  }\n}\n\nexport function unsetCacheItem(storage: StorageTypes | null) {\n  switch (storage) {\n    case 'local': {\n      return window.localStorage.removeItem.bind(localStorage);\n    }\n\n    case 'session': {\n      return window.sessionStorage.removeItem.bind(sessionStorage);\n    }\n\n    case 'idb': {\n      return (key: string) => del(key);\n    }\n\n    default: {\n      return () => {};\n    }\n  }\n}\n\nexport function convertLegacyCartItem(legacyItem: LegacyCartItem): CartItem {\n  const {\n    quantity,\n    productId,\n    image,\n    availableForSale,\n    createdAt,\n    description,\n    featuredMedia,\n    globalHandle,\n    handle,\n    indexedAt,\n    locale,\n    media,\n    metafields,\n    pimSyncSource,\n    pimSyncSourceDomain,\n    pimSyncSourceLocale,\n    pimSyncSourceProductId,\n    priceRange,\n    productType,\n    tags,\n    title,\n    updatedAt,\n    variants,\n    vendor,\n    compareAtPrice,\n    compareAtPriceCurrency,\n    id,\n    price,\n    priceCurrency,\n    selectedOptions,\n    sku,\n    swatchSrc,\n    weight,\n    weightUnit\n  } = legacyItem;\n\n  return {\n    quantity: Number.isInteger(quantity) ? (quantity as number) : 1,\n    product: {\n      availableForSale,\n      createdAt,\n      description,\n      featuredMedia,\n      globalHandle,\n      handle,\n      id: productId,\n      indexedAt,\n      locale,\n      media,\n      metafields,\n      pimSyncSource,\n      pimSyncSourceDomain,\n      pimSyncSourceLocale,\n      pimSyncSourceProductId,\n      priceRange,\n      productType,\n      tags,\n      title,\n      updatedAt,\n      variants,\n      vendor\n    },\n    variant: {\n      ...legacyItem.variant,\n      compareAtPrice,\n      compareAtPriceCurrency,\n      featuredMedia: image,\n      id,\n      price,\n      priceCurrency,\n      selectedOptions,\n      sku,\n      swatchSrc,\n      weight,\n      weightUnit\n    }\n  };\n}\n","import { CartItem } from '../../common/types';\n\nimport { isItemInCart, setCacheItem } from '~/hooks/use-cart/utils';\nimport { AddToCartAction, CartState } from '~/hooks/use-cart/use-cart.types';\n\nconst addToCart: AddToCartFunction = (\n  state: CartState,\n  action: AddToCartAction\n) => {\n  const isInCart = action.isInCart || isItemInCart;\n  const cart: CartItem[] = isInCart(state.cart, action.payload)\n    ? state.cart.map((item) => {\n        if (isInCart([item], action.payload)) {\n          return {\n            ...item,\n            quantity: item.quantity + (action.payload.quantity || 1)\n          };\n        }\n\n        return item;\n      })\n    : [...state.cart, { ...action.payload }];\n\n  setCacheItem(action.storage)(action.cacheKey || 'cart', JSON.stringify(cart));\n\n  return {\n    ...state,\n    cart\n  };\n};\n\nexport default addToCart;\n\nexport type AddToCartFunction = (\n  state: CartState,\n  action: AddToCartAction\n) => {\n  cart: CartItem[];\n  show: boolean;\n};\n","import {\n  CartState,\n  CartReducerAction,\n  AddToCartFunction,\n  ClearCartFunction,\n  DecrementItemFunction,\n  IncrementItemFunction,\n  InitCartFunction,\n  RemoveFromCartFunction,\n  ToggleCartFunction,\n  UpdateItemFunction,\n  IsInCartFunction\n} from './use-cart.types';\n\nimport {\n  addToCart as addToCartDefault,\n  clearCart as clearCartDefault,\n  decrementItem as decrementItemDefault,\n  incrementItem as incrementItemDefault,\n  initCart as initCartDefault,\n  removeFromCart as removeFromCartDefault,\n  toggleCart as toggleCartDefault,\n  updateItem as updateItemDefault\n} from './actions';\n\nexport const INIT_CART = 'cart/init-cart';\nexport const ADD_TO_CART = 'cart/add-to-cart';\nexport const INCREMENT_ITEM = 'cart/increment-item';\nexport const DECREMENT_ITEM = 'cart/decrement-item';\nexport const UPDATE_ITEM = 'cart/update-item';\nexport const REMOVE_FROM_CART = 'cart/remove-from-cart';\nexport const TOGGLE_CART = 'cart/toggle-visibility';\nexport const SET_CHECKOUT_STATUS = 'cart/set-status';\nexport const CLEAR_CART = 'cart/clear';\n\nexport const initialState: CartState = {\n  cart: [],\n  show: false\n};\n\nexport interface CreateCartReducerParams {\n  addToCart?: AddToCartFunction;\n  clearCart?: ClearCartFunction;\n  decrementItem?: DecrementItemFunction;\n  incrementItem?: IncrementItemFunction;\n  initCart?: InitCartFunction;\n  removeFromCart?: RemoveFromCartFunction;\n  toggleCart?: ToggleCartFunction;\n  updateItem?: UpdateItemFunction;\n  isInCart?: IsInCartFunction;\n}\n\nconst cartReducer = (\n  state: CartState,\n  action: CartReducerAction\n): CartState => {\n  switch (action.type) {\n    case INIT_CART: {\n      return action.initCart\n        ? action.initCart(state, action)\n        : initCartDefault(state, action);\n    }\n\n    case ADD_TO_CART: {\n      return action.addToCart\n        ? action.addToCart(state, action)\n        : addToCartDefault(state, action);\n    }\n\n    case UPDATE_ITEM: {\n      return action.updateItem\n        ? action.updateItem(state, action)\n        : updateItemDefault(state, action);\n    }\n\n    case REMOVE_FROM_CART: {\n      return action.removeFromCart\n        ? action.removeFromCart(state, action)\n        : removeFromCartDefault(state, action);\n    }\n\n    case INCREMENT_ITEM: {\n      return action.incrementItem\n        ? action.incrementItem(state, action)\n        : incrementItemDefault(state, action);\n    }\n\n    case DECREMENT_ITEM: {\n      return action.decrementItem\n        ? action.decrementItem(state, action)\n        : decrementItemDefault(state, action);\n    }\n\n    case CLEAR_CART:\n      return action.clearCart\n        ? action.clearCart(state, action)\n        : clearCartDefault(state, action);\n\n    case TOGGLE_CART: {\n      return action.toggleCart\n        ? action.toggleCart(state, action)\n        : toggleCartDefault(state, action);\n    }\n\n    default:\n      throw new Error('invalid action sent to cart reducer');\n  }\n};\n\nexport default cartReducer;\n","import { CartItem } from '../../common/types';\n\nimport { setCacheItem } from '~/hooks/use-cart/utils';\nimport { InitCartAction, CartState } from '~/hooks/use-cart/use-cart.types';\n\nconst initCart: InitCartFunction = (\n  state: CartState,\n  action: InitCartAction\n) => {\n  const cart: CartItem[] = [...action.payload];\n\n  setCacheItem(action.storage)(action.cacheKey || 'cart', JSON.stringify(cart));\n\n  return {\n    ...state,\n    cart\n  };\n};\n\nexport default initCart;\n\nexport type InitCartFunction = (\n  state: CartState,\n  action: InitCartAction\n) => {\n  cart: CartItem[];\n  show: boolean;\n};\n","import { CartItem } from '../../common/types';\n\nimport { isItemInCart, setCacheItem } from '~/hooks/use-cart/utils';\nimport { CartState, UpdateItemAction } from '~/hooks/use-cart/use-cart.types';\n\nconst updateItem: UpdateItemFunction = (\n  state: CartState,\n  action: UpdateItemAction\n) => {\n  const cart: CartItem[] = state.cart.map((item) => {\n    const isInCart = action.isInCart || isItemInCart;\n    let localItem: any = null;\n\n    if (isInCart([item], action.payload)) {\n      localItem = { ...item };\n      Object.keys(item).forEach((key) => {\n        const value = (action.payload as any)[key];\n\n        if (key !== 'id' && localItem[key] !== value) {\n          localItem[key] = value;\n        }\n      });\n    }\n\n    return localItem || item;\n  });\n\n  setCacheItem(action.storage)(action.cacheKey || 'cart', JSON.stringify(cart));\n\n  return {\n    ...state,\n    cart\n  };\n};\n\nexport default updateItem;\n\nexport type UpdateItemFunction = (\n  state: CartState,\n  action: UpdateItemAction\n) => {\n  cart: CartItem[];\n  show: boolean;\n};\n","import { CartItem } from '../../common/types';\n\nimport { isItemInCart, setCacheItem } from '~/hooks/use-cart/utils';\nimport {\n  CartState,\n  RemoveFromCartAction\n} from '~/hooks/use-cart/use-cart.types';\n\nconst removeFromCart: RemoveFromCartFunction = (\n  state: CartState,\n  action: RemoveFromCartAction\n) => {\n  const isInCart = action.isInCart || isItemInCart;\n\n  const cart: CartItem[] = state.cart.filter(\n    (item) => !isInCart([item], action.payload)\n  );\n\n  setCacheItem(action.storage)(action.cacheKey || 'cart', JSON.stringify(cart));\n\n  return {\n    ...state,\n    cart\n  };\n};\n\nexport default removeFromCart;\n\nexport type RemoveFromCartFunction = (\n  state: CartState,\n  action: RemoveFromCartAction\n) => {\n  cart: CartItem[];\n  show: boolean;\n};\n","import { CartItem } from '../../common/types';\n\nimport { isItemInCart, setCacheItem } from '~/hooks/use-cart/utils';\nimport {\n  CartState,\n  IncrementItemAction\n} from '~/hooks/use-cart/use-cart.types';\n\nconst incrementItem: IncrementItemFunction = (\n  state: CartState,\n  action: IncrementItemAction\n) => {\n  const cart: CartItem[] = state.cart.map((item) => {\n    const isInCart = action.isInCart || isItemInCart;\n\n    if (isInCart([item], action.payload)) {\n      return { ...item, quantity: item.quantity + 1 };\n    }\n\n    return item;\n  });\n\n  setCacheItem(action.storage)(action.cacheKey || 'cart', JSON.stringify(cart));\n\n  return {\n    ...state,\n    cart\n  };\n};\n\nexport default incrementItem;\n\nexport type IncrementItemFunction = (\n  state: CartState,\n  action: IncrementItemAction\n) => {\n  cart: CartItem[];\n  show: boolean;\n};\n","import { CartItem } from '../../common/types';\n\nimport { isItemInCart, setCacheItem } from '~/hooks/use-cart/utils';\nimport {\n  CartState,\n  DecrementItemAction\n} from '~/hooks/use-cart/use-cart.types';\n\nconst decrementItem: DecrementItemFunction = (\n  state: CartState,\n  action: DecrementItemAction\n) => {\n  const cart: CartItem[] = state.cart\n    .map((item) => {\n      const isInCart = action.isInCart || isItemInCart;\n\n      if (isInCart([item], action.payload)) {\n        return {\n          ...item,\n          quantity: item.quantity - 1\n        };\n      }\n\n      return item;\n    })\n    .filter((item) => item.quantity);\n\n  setCacheItem(action.storage)(action.cacheKey || 'cart', JSON.stringify(cart));\n\n  return {\n    ...state,\n    cart\n  };\n};\n\nexport default decrementItem;\n\nexport type DecrementItemFunction = (\n  state: CartState,\n  action: DecrementItemAction\n) => {\n  cart: CartItem[];\n  show: boolean;\n};\n","import { CartState, ClearCartAction } from '~/hooks/use-cart/use-cart.types';\nimport { unsetCacheItem } from '../utils';\n\nconst clearCart: ClearCartFunction = (\n  state: CartState,\n  action: ClearCartAction\n) => {\n  unsetCacheItem(action.storage)(action.cacheKey || 'cart');\n\n  return {\n    ...state,\n    cart: []\n  };\n};\n\nexport default clearCart;\n\nexport type ClearCartFunction = (\n  state: CartState,\n  action: ClearCartAction\n) => {\n  cart: any[];\n  show: boolean;\n};\n","import { CartItem } from '../../common/types';\n\nimport {\n  CartState,\n  ToggleVisibilityAction\n} from '~/hooks/use-cart/use-cart.types';\n\nconst toggleCart: ToggleCartFunction = (\n  state: CartState,\n  action: ToggleVisibilityAction\n) => {\n  let show = !state.show;\n  const stay = action.payload;\n\n  if (stay) {\n    if (stay === 'open') {\n      show = true;\n    } else if (stay === 'closed') {\n      show = false;\n    }\n  }\n\n  return {\n    ...state,\n    show\n  };\n};\n\nexport default toggleCart;\n\nexport type ToggleCartFunction = (\n  state: CartState,\n  action: ToggleVisibilityAction\n) => {\n  show: boolean;\n  cart: CartItem[];\n};\n","import React, { useEffect, useReducer, useMemo, useContext, FC } from 'react';\nimport { get } from 'idb-keyval';\nimport { CartItem } from '../common/types';\nimport { convertLegacyCartItem, isItemInCart } from './utils';\n\nimport {\n  AddToCartFunction,\n  CartActions,\n  CartState,\n  CartToggleStates,\n  ClearCartFunction,\n  DecrementItemFunction,\n  IncrementItemFunction,\n  InitCartFunction,\n  IsInCartFunction,\n  LegacyCartItem,\n  RemoveFromCartFunction,\n  StorageTypes,\n  ToggleCartFunction,\n  UpdateItemFunction\n} from './use-cart.types';\n\nimport cartReducer, {\n  initialState,\n  INIT_CART,\n  ADD_TO_CART,\n  UPDATE_ITEM,\n  REMOVE_FROM_CART,\n  INCREMENT_ITEM,\n  DECREMENT_ITEM,\n  TOGGLE_CART,\n  CLEAR_CART\n} from './use-cart.reducer';\n\nexport type CartContextValue = null | CartState;\nexport type CartActionContextValue = null | CartActions;\nexport type CartProviderProps = {\n  children: JSX.Element | JSX.Element[];\n  storage?: StorageTypes;\n  cacheKey?: string;\n  initCart?: InitCartFunction;\n  addToCart?: AddToCartFunction;\n  clearCart?: ClearCartFunction;\n  decrementItem?: DecrementItemFunction;\n  incrementItem?: IncrementItemFunction;\n  removeFromCart?: RemoveFromCartFunction;\n  toggleCart?: ToggleCartFunction;\n  updateItem?: UpdateItemFunction;\n  isInCart?: IsInCartFunction;\n};\n\nconst CartContext = React.createContext<CartContextValue>(null);\nconst CartActionContext = React.createContext<CartActionContextValue>(null);\nconst IsInCartContext = React.createContext<IsInCartFunction>(isItemInCart);\n\nexport const CartProvider: FC<CartProviderProps> = ({\n  children,\n  storage = 'local',\n  cacheKey = 'cart',\n  addToCart,\n  clearCart,\n  decrementItem,\n  incrementItem,\n  removeFromCart,\n  toggleCart,\n  updateItem,\n  isInCart\n}) => {\n  const [state, dispatch] = useReducer(cartReducer, initialState);\n\n  useEffect(() => {\n    let cart: CartItem[] = [];\n    let unformattedCart: CartItem[] | LegacyCartItem[];\n\n    async function initCart() {\n      let cartString: string | null | undefined = '';\n      if (storage) {\n        if (storage === 'local') {\n          cartString = window.localStorage.getItem(cacheKey);\n        } else if (storage === 'session') {\n          cartString = window.sessionStorage.getItem(cacheKey);\n        } else if (storage === 'idb') {\n          cartString = await get(cacheKey);\n        }\n        if (cartString) {\n          unformattedCart = JSON.parse(cartString);\n\n          const hasLegacyCartItems = unformattedCart?.length\n            ? unformattedCart\n                .map((i: CartItem | LegacyCartItem) => 'productId' in i)\n                .some((truthy) => truthy)\n            : false;\n\n          if (hasLegacyCartItems) {\n            cart = (unformattedCart as LegacyCartItem[]).map((item) =>\n              convertLegacyCartItem(item)\n            );\n          } else {\n            cart = unformattedCart as CartItem[];\n          }\n          if (cart) {\n            dispatch({\n              type: INIT_CART,\n              payload: cart,\n              storage,\n              cacheKey\n            });\n          }\n        }\n      }\n    }\n    initCart();\n  }, [storage, cacheKey]);\n\n  const cartActions: CartActions = useMemo(\n    () => ({\n      initCart: (payload: CartItem[]): void =>\n        dispatch({\n          type: INIT_CART,\n          payload,\n          storage,\n          cacheKey\n        }),\n      addToCart: (payload: CartItem): void =>\n        dispatch({\n          type: ADD_TO_CART,\n          payload,\n          isInCart,\n          addToCart,\n          storage,\n          cacheKey\n        }),\n      removeFromCart: (payload: CartItem) =>\n        dispatch({\n          type: REMOVE_FROM_CART,\n          payload,\n          isInCart,\n          removeFromCart,\n          storage,\n          cacheKey\n        }),\n      updateItem: (payload: CartItem) =>\n        dispatch({\n          type: UPDATE_ITEM,\n          payload,\n          isInCart,\n          updateItem,\n          storage,\n          cacheKey\n        }),\n      incrementItem: (payload: CartItem): void =>\n        dispatch({\n          type: INCREMENT_ITEM,\n          payload,\n          isInCart,\n          incrementItem,\n          storage,\n          cacheKey\n        }),\n      decrementItem: (payload: CartItem): void =>\n        dispatch({\n          type: DECREMENT_ITEM,\n          payload,\n          isInCart,\n          decrementItem,\n          storage,\n          cacheKey\n        }),\n      toggleCart: (payload: CartToggleStates) =>\n        dispatch({ type: TOGGLE_CART, payload, toggleCart }),\n      clearCart: (): void =>\n        dispatch({\n          type: CLEAR_CART,\n          clearCart,\n          storage\n        })\n    }),\n    [\n      isInCart,\n      addToCart,\n      removeFromCart,\n      updateItem,\n      incrementItem,\n      decrementItem,\n      toggleCart,\n      clearCart,\n      storage,\n      cacheKey\n    ]\n  );\n\n  return (\n    <CartContext.Provider value={state}>\n      <CartActionContext.Provider value={cartActions}>\n        <IsInCartContext.Provider value={isInCart || isItemInCart}>\n          {children}\n        </IsInCartContext.Provider>\n      </CartActionContext.Provider>\n    </CartContext.Provider>\n  );\n};\n\n/**\n * Provides access to the cart provider's state\n *\n * @returns an object with the cart's current state\n */\nexport function useCartState(): CartState | null {\n  return useContext(CartContext);\n}\n\n/**\n * Provides access to actions that interact with the cart\n *\n * @returns an object with functions for interacting with the cart.\n *\n * addToCart() - add an item to the cart; if the item is already in the cart,\n * this function will increase the quantity of that item\n * removeFromCart() - remove an item from the cart\n * incrementItem() - increment the quantity of an item in the cart\n * decrementItem() - decrement the quantity of an item in the cart\n * toggleCart() - toggles the cart's show status\n * clearCart() - removes all items from the cart\n */\nexport function useCartActions(): CartActions | null {\n  return useContext(CartActionContext);\n}\n\n/**\n * Provides access to the active isInCart function\n *\n * @returns a function which determines whether a line item is already in the cart\n */\nexport function useIsInCart(): IsInCartFunction {\n  return useContext(IsInCartContext);\n}\n","import {\n  useCartState,\n  useCartActions,\n  useIsInCart,\n  CartProvider\n} from './use-cart.provider';\nimport { CartState, CartActions, IsInCartFunction } from './use-cart.types';\n\nconst useCart = () =>\n  [useCartState(), useCartActions(), useIsInCart()] as [\n    CartState,\n    CartActions,\n    IsInCartFunction\n  ];\n\nexport { useCart, CartProvider };\n","import { CacheKey } from '../use-checkout.types';\n\nexport const cacheKeys = {\n  completed: 'checkoutComplete',\n  id: 'checkoutId',\n  url: 'checkoutUrl'\n} as const;\n\nexport function getCacheBoolean(key: CacheKey, defaultValue: boolean): boolean {\n  if (typeof window !== 'undefined') {\n    const item = window.localStorage.getItem(key);\n\n    if (item) {\n      return JSON.parse(item) as boolean;\n    }\n\n    return false;\n  }\n\n  return defaultValue;\n}\n\nexport function getCacheString(\n  key: CacheKey,\n  defaultValue: string = ''\n): string {\n  if (typeof window !== 'undefined') {\n    const item = window.localStorage.getItem(key);\n\n    if (item) {\n      return item;\n    }\n\n    return '';\n  }\n\n  return defaultValue;\n}\n\nexport function setCacheItem(key: CacheKey, value: string): void {\n  if (typeof window !== 'undefined' && value) {\n    window.localStorage.setItem(key, value);\n  }\n}\n\nexport function unsetCacheItem(key: string): void {\n  if (typeof window !== 'undefined' && key) {\n    window.localStorage.removeItem(key);\n  }\n}\n","import { cacheKeys, unsetCacheItem } from '../utils';\nimport { CheckoutState } from 'hooks/use-checkout/use-checkout.types';\n\nconst clearCheckoutData = (): CheckoutState => {\n  unsetCacheItem(cacheKeys.completed);\n  unsetCacheItem(cacheKeys.id);\n  unsetCacheItem(cacheKeys.url);\n\n  return {\n    completed: false,\n    id: '',\n    url: '',\n    getCheckoutError: '',\n    processCheckoutError: ''\n  };\n};\n\nexport default clearCheckoutData;\n","import { Reducer } from 'react';\nimport {\n  clearCheckoutData,\n  setGetCheckoutData,\n  setGetCheckoutError,\n  setProcessCheckoutData,\n  setProcessCheckoutError\n} from './actions';\nimport { cacheKeys, getCacheBoolean, getCacheString } from './utils';\nimport { Actions, CheckoutState } from './use-checkout.types';\n\nexport const initialState: CheckoutState = {\n  completed: getCacheBoolean(cacheKeys.completed, false),\n  id: getCacheString(cacheKeys.id),\n  url: '',\n  getCheckoutError: '',\n  processCheckoutError: ''\n};\n\nexport const CLEAR_CHECKOUT_DATA = 'checkout/clear-checkout-data';\nexport const SET_GET_CHECKOUT_DATA = 'checkout/set-get-checkout-data';\nexport const SET_GET_CHECKOUT_ERROR = 'checkout/set-get-checkout-error';\nexport const SET_PROCESS_CHECKOUT_ERROR = 'checkout/set-process-checkout-error';\nexport const SET_PROCESS_CHECKOUT_DATA = 'checkout/set-process-checkout-data';\n\nconst checkoutReducer: Reducer<CheckoutState, Actions> = (\n  state: CheckoutState,\n  action: Actions\n) => {\n  switch (action.type) {\n    case CLEAR_CHECKOUT_DATA: {\n      return clearCheckoutData();\n    }\n\n    case SET_GET_CHECKOUT_DATA: {\n      return setGetCheckoutData(state, action);\n    }\n\n    case SET_GET_CHECKOUT_ERROR: {\n      return setGetCheckoutError(state, action);\n    }\n\n    case SET_PROCESS_CHECKOUT_DATA: {\n      return setProcessCheckoutData(state, action);\n    }\n\n    case SET_PROCESS_CHECKOUT_ERROR: {\n      return setProcessCheckoutError(state, action);\n    }\n\n    default:\n      throw new Error('invalid action sent to checkout reducer');\n  }\n};\n\nexport default checkoutReducer;\n","import { cacheKeys, setCacheItem } from '../utils';\nimport { CheckoutState, SetGetCheckoutDataAction } from '../use-checkout.types';\n\nconst setGetCheckoutData = (\n  state: CheckoutState,\n  action: SetGetCheckoutDataAction\n): CheckoutState => {\n  const { completed, id, url } = action.payload;\n\n  setCacheItem(cacheKeys.completed, completed.toString());\n  setCacheItem(cacheKeys.id, id);\n  setCacheItem(cacheKeys.url, url);\n\n  return {\n    ...state,\n    completed,\n    id,\n    url\n  };\n};\n\nexport default setGetCheckoutData;\n","import { cacheKeys, setCacheItem, unsetCacheItem } from '../utils';\nimport {\n  CheckoutState,\n  SetGetCheckoutErrorAction\n} from '../use-checkout.types';\n\nconst setGetCheckoutError = (\n  state: CheckoutState,\n  action: SetGetCheckoutErrorAction\n): CheckoutState => {\n  setCacheItem(cacheKeys.completed, 'false');\n  unsetCacheItem(cacheKeys.id);\n  unsetCacheItem(cacheKeys.url);\n\n  return {\n    ...state,\n    completed: false,\n    id: '',\n    url: '',\n    getCheckoutError: action.payload\n  };\n};\n\nexport default setGetCheckoutError;\n","import { cacheKeys, setCacheItem } from '../utils';\nimport {\n  CheckoutState,\n  SetProcessCheckoutDataAction\n} from '../use-checkout.types';\n\nconst setCheckoutData = (\n  state: CheckoutState,\n  action: SetProcessCheckoutDataAction\n): CheckoutState => {\n  const { id, url } = action.payload;\n\n  setCacheItem(cacheKeys.id, id);\n  setCacheItem(cacheKeys.url, url);\n  setCacheItem(cacheKeys.completed, 'false');\n\n  return {\n    ...state,\n    completed: false,\n    id,\n    url,\n    processCheckoutError: ''\n  };\n};\n\nexport default setCheckoutData;\n","import { cacheKeys, setCacheItem, unsetCacheItem } from '../utils';\nimport {\n  CheckoutState,\n  SetProcessCheckoutErrorAction\n} from '../use-checkout.types';\n\nconst setProcessCheckoutError = (\n  state: CheckoutState,\n  action: SetProcessCheckoutErrorAction\n): CheckoutState => {\n  setCacheItem(cacheKeys.completed, 'false');\n  unsetCacheItem(cacheKeys.id);\n  unsetCacheItem(cacheKeys.url);\n\n  return {\n    ...state,\n    completed: false,\n    id: '',\n    url: '',\n    processCheckoutError: action.payload\n  };\n};\n\nexport default setProcessCheckoutError;\n","import React, {\n  useState,\n  useRef,\n  useEffect,\n  useContext,\n  FC,\n  useCallback,\n  useReducer\n} from 'react';\nimport {\n  CheckoutClient,\n  CheckoutActionContextValue,\n  CheckoutContextValue,\n  CheckoutProperties,\n  CheckoutProviderProps\n} from './use-checkout.types';\n\nimport checkoutReducer, {\n  initialState,\n  CLEAR_CHECKOUT_DATA,\n  SET_GET_CHECKOUT_DATA,\n  SET_GET_CHECKOUT_ERROR,\n  SET_PROCESS_CHECKOUT_DATA,\n  SET_PROCESS_CHECKOUT_ERROR\n} from './use-checkout.reducer';\nimport {\n  cacheKeys,\n  getCacheBoolean,\n  getCacheString,\n  setCacheItem\n} from './utils';\n\nconst CheckoutClientContext = React.createContext<CheckoutClient>({\n  get: () => Promise.resolve({ id: '', url: '', completed: false }),\n  process: () => Promise.resolve({ id: '', url: '', completed: false })\n});\n\nconst CheckoutDataContext = React.createContext<CheckoutContextValue>(\n  initialState\n);\nconst CheckoutActionContext = React.createContext<CheckoutActionContextValue>(\n  null\n);\nconst IsCheckingOutContext = React.createContext<boolean>(false);\n\nexport const CheckoutProvider: FC<CheckoutProviderProps> = ({\n  children,\n  checkoutClient,\n  redirectUserToCheckout\n}) => {\n  const [isCheckingOut, setIsCheckingOut] = useState(false);\n  const isMounted = useRef(true);\n  const hasFetchedCheckout = useRef(false);\n\n  // Set up the reducer\n  const [checkoutState, dispatch] = useReducer(checkoutReducer, initialState);\n\n  // Set up the `checkoutActions`\n  const clearCheckoutData = () => dispatch({ type: CLEAR_CHECKOUT_DATA });\n\n  const getCheckout = useCallback(\n    (params: Parameters<typeof checkoutClient.get>[0]) => {\n      return checkoutClient\n        .get(params)\n        .then((data: CheckoutProperties) => {\n          dispatch({ type: SET_GET_CHECKOUT_DATA, payload: data });\n\n          return data;\n        })\n        .catch((err: string) => {\n          dispatch({ type: SET_GET_CHECKOUT_ERROR, payload: err });\n\n          throw new Error(err);\n        });\n    },\n    [checkoutClient]\n  );\n\n  const processCheckout = useCallback(\n    (params: Parameters<typeof checkoutClient.process>[0]) => {\n      setIsCheckingOut(true);\n      return checkoutClient\n        .process(params)\n        .then((data) => {\n          if (data.id && typeof data.id === 'string') {\n            setCacheItem(cacheKeys.id, data.id);\n          }\n\n          dispatch({\n            type: SET_PROCESS_CHECKOUT_DATA,\n            payload: data\n          });\n          setIsCheckingOut(false);\n\n          return data;\n        })\n        .catch((err: string) => {\n          dispatch({\n            type: SET_PROCESS_CHECKOUT_ERROR,\n            payload: err\n          });\n          setIsCheckingOut(false);\n\n          throw new Error(err);\n        });\n    },\n    [checkoutClient]\n  );\n\n  // Set isMounted to false when the component is unmounted\n  useEffect(\n    () => () => {\n      isMounted.current = false;\n    },\n    []\n  );\n\n  // Set the `checkoutState.checkoutComplete` value, if needed\n  useEffect(() => {\n    const complete =\n      checkoutState.completed || getCacheBoolean(cacheKeys.completed, false);\n    const id = checkoutState.id || getCacheString(cacheKeys.id);\n    const url = checkoutState.url || getCacheString(cacheKeys.url);\n\n    if (\n      id &&\n      url &&\n      !complete &&\n      !isCheckingOut &&\n      !hasFetchedCheckout.current\n    ) {\n      hasFetchedCheckout.current = true;\n\n      getCheckout({ id, url }).catch((err) => console.warn(err));\n    }\n  }, [checkoutState, getCheckout, isCheckingOut]);\n\n  useEffect(() => {\n    if (typeof redirectUserToCheckout !== 'undefined') {\n      console.warn(\n        '[@nacelle/react-hooks|useCheckout] The `redirectUserToCheckout` prop is deprecated. ' +\n          'Please handle the customer redirect to the checkout URL in your project code.'\n      );\n    }\n  });\n\n  return (\n    <CheckoutClientContext.Provider value={checkoutClient}>\n      <CheckoutDataContext.Provider value={checkoutState}>\n        <CheckoutActionContext.Provider\n          value={{ clearCheckoutData, getCheckout, processCheckout }}\n        >\n          <IsCheckingOutContext.Provider value={isCheckingOut}>\n            {children}\n          </IsCheckingOutContext.Provider>\n        </CheckoutActionContext.Provider>\n      </CheckoutDataContext.Provider>\n    </CheckoutClientContext.Provider>\n  );\n};\n\nexport function useCheckoutClient() {\n  return useContext(CheckoutClientContext);\n}\n\nexport function useCheckoutState(): CheckoutContextValue {\n  return useContext(CheckoutDataContext);\n}\n\nexport function useCheckoutActions(): CheckoutActionContextValue {\n  return useContext(CheckoutActionContext);\n}\n\nexport function useIsCheckingOut(): boolean {\n  return useContext(IsCheckingOutContext);\n}\n","import {\n  useCheckoutState,\n  useCheckoutActions,\n  useIsCheckingOut,\n  CheckoutProvider\n} from './use-checkout.provider';\nimport { CheckoutState, CheckoutActions } from './use-checkout.types';\n\n/**\n * Create and manage checkouts.\n *\n * @returns an array with:\n * - [0]: checkout data object\n * - [1]: object containing `processCheckout`, `getCheckout`, and `clearCheckoutData` checkout functions\n * - [2]: an `isCheckingOut` boolean\n */\nconst useCheckout = () => {\n  const checkoutState = useCheckoutState();\n  const checkoutActions = useCheckoutActions();\n  const isCheckingOut = useIsCheckingOut();\n\n  return [checkoutState, checkoutActions, isCheckingOut] as [\n    CheckoutState,\n    CheckoutActions,\n    boolean\n  ];\n};\n\nexport { useCheckout, CheckoutProvider };\n"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","this","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","__generator","body","f","y","g","_","label","sent","trys","ops","verb","throw","return","Symbol","iterator","v","op","TypeError","pop","push","__spreadArray","to","from","pack","ar","l","Array","slice","concat","promisifyRequest","request","oncomplete","onsuccess","onabort","onerror","error","createStore","dbName","storeName","dbp","navigator","userAgentData","test","userAgent","indexedDB","databases","tryIdb","finally","intervalId","setInterval","clearInterval","open","onupgradeneeded","createObjectStore","txMode","callback","db","transaction","objectStore","defaultGetStoreFunc","defaultGetStore","get","key","customStore","store","isItemInCart","cart","payload","findIndex","item","variant","id","setCacheItem","storage","window","localStorage","setItem","bind","sessionStorage","put","set","unsetCacheItem","removeItem","delete","del","initialState","show","cartReducer","state","action","type","initCart","cacheKey","JSON","stringify","initCartDefault","addToCart","isInCart","map","quantity","addToCartDefault","updateItem","localItem","keys","forEach","updateItemDefault","removeFromCart","filter","removeFromCartDefault","incrementItem","incrementItemDefault","decrementItem","decrementItemDefault","clearCart","clearCartDefault","toggleCart","stay","toggleCartDefault","Error","CartContext","React","createContext","CartActionContext","IsInCartContext","CartProvider","_a","children","_b","_c","_d","useReducer","dispatch","useEffect","unformattedCart","cartString","getItem","parse","hasLegacyCartItems","some","truthy","legacyItem","productId","image","availableForSale","createdAt","description","featuredMedia","globalHandle","handle","indexedAt","locale","media","metafields","pimSyncSource","pimSyncSourceDomain","pimSyncSourceLocale","pimSyncSourceProductId","priceRange","productType","tags","title","updatedAt","variants","vendor","compareAtPrice","compareAtPriceCurrency","price","priceCurrency","selectedOptions","sku","swatchSrc","weight","weightUnit","Number","isInteger","product","cartActions","useMemo","Provider","useCart","useContext","cacheKeys","getCacheBoolean","defaultValue","getCacheString","completed","url","getCheckoutError","processCheckoutError","checkoutReducer","toString","setGetCheckoutData","setGetCheckoutError","setProcessCheckoutData","setProcessCheckoutError","CheckoutClientContext","process","CheckoutDataContext","CheckoutActionContext","IsCheckingOutContext","CheckoutProvider","checkoutClient","redirectUserToCheckout","useState","isCheckingOut","setIsCheckingOut","isMounted","useRef","hasFetchedCheckout","checkoutState","getCheckout","useCallback","params","data","catch","err","processCheckout","current","complete","console","warn","clearCheckoutData","useCheckout"],"mappings":";;;;;;;;;;;;;;gFA+BO,IAAIA,EAAW,WAQlB,OAPAA,EAAWC,OAAOC,QAAU,SAAkBC,GAC1C,IAAK,IAAIC,EAAGC,EAAI,EAAGC,EAAIC,UAAUC,OAAQH,EAAIC,EAAGD,IAE5C,IAAK,IAAII,KADTL,EAAIG,UAAUF,GACOJ,OAAOS,UAAUC,eAAeC,KAAKR,EAAGK,KAAIN,EAAEM,GAAKL,EAAEK,IAE9E,OAAON,IAEKU,MAAMC,KAAMP,YA8BzB,SAASQ,EAAUC,EAASC,EAAYC,EAAGC,GAE9C,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GAC/C,SAASC,EAAUC,GAAS,IAAMC,EAAKN,EAAUO,KAAKF,IAAW,MAAOG,GAAKL,EAAOK,IACpF,SAASC,EAASJ,GAAS,IAAMC,EAAKN,EAAiB,MAAEK,IAAW,MAAOG,GAAKL,EAAOK,IACvF,SAASF,EAAKI,GAJlB,IAAeL,EAIaK,EAAOC,KAAOT,EAAQQ,EAAOL,QAJ1CA,EAIyDK,EAAOL,MAJhDA,aAAiBN,EAAIM,EAAQ,IAAIN,GAAE,SAAUG,GAAWA,EAAQG,OAITO,KAAKR,EAAWK,GAClGH,GAAMN,EAAYA,EAAUN,MAAMG,EAASC,GAAc,KAAKS,WAI/D,SAASM,EAAYhB,EAASiB,GACjC,IAAsGC,EAAGC,EAAGhC,EAAGiC,EAA3GC,EAAI,CAAEC,MAAO,EAAGC,KAAM,WAAa,GAAW,EAAPpC,EAAE,GAAQ,MAAMA,EAAE,GAAI,OAAOA,EAAE,IAAOqC,KAAM,GAAIC,IAAK,IAChG,OAAOL,EAAI,CAAEV,KAAMgB,EAAK,GAAIC,MAASD,EAAK,GAAIE,OAAUF,EAAK,IAAwB,mBAAXG,SAA0BT,EAAES,OAAOC,UAAY,WAAa,OAAOhC,OAAUsB,EACvJ,SAASM,EAAKpC,GAAK,OAAO,SAAUyC,GAAK,OACzC,SAAcC,GACV,GAAId,EAAG,MAAM,IAAIe,UAAU,mCAC3B,KAAOZ,OACH,GAAIH,EAAI,EAAGC,IAAMhC,EAAY,EAAR6C,EAAG,GAASb,EAAU,OAAIa,EAAG,GAAKb,EAAS,SAAOhC,EAAIgC,EAAU,SAAMhC,EAAES,KAAKuB,GAAI,GAAKA,EAAET,SAAWvB,EAAIA,EAAES,KAAKuB,EAAGa,EAAG,KAAKlB,KAAM,OAAO3B,EAE3J,OADIgC,EAAI,EAAGhC,IAAG6C,EAAK,CAAS,EAARA,EAAG,GAAQ7C,EAAEqB,QACzBwB,EAAG,IACP,KAAK,EAAG,KAAK,EAAG7C,EAAI6C,EAAI,MACxB,KAAK,EAAc,OAAXX,EAAEC,QAAgB,CAAEd,MAAOwB,EAAG,GAAIlB,MAAM,GAChD,KAAK,EAAGO,EAAEC,QAASH,EAAIa,EAAG,GAAIA,EAAK,CAAC,GAAI,SACxC,KAAK,EAAGA,EAAKX,EAAEI,IAAIS,MAAOb,EAAEG,KAAKU,MAAO,SACxC,QACI,KAAM/C,EAAIkC,EAAEG,MAAMrC,EAAIA,EAAEK,OAAS,GAAKL,EAAEA,EAAEK,OAAS,KAAkB,IAAVwC,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAEX,EAAI,EAAG,SACjG,GAAc,IAAVW,EAAG,MAAc7C,GAAM6C,EAAG,GAAK7C,EAAE,IAAM6C,EAAG,GAAK7C,EAAE,IAAM,CAAEkC,EAAEC,MAAQU,EAAG,GAAI,MAC9E,GAAc,IAAVA,EAAG,IAAYX,EAAEC,MAAQnC,EAAE,GAAI,CAAEkC,EAAEC,MAAQnC,EAAE,GAAIA,EAAI6C,EAAI,MAC7D,GAAI7C,GAAKkC,EAAEC,MAAQnC,EAAE,GAAI,CAAEkC,EAAEC,MAAQnC,EAAE,GAAIkC,EAAEI,IAAIU,KAAKH,GAAK,MACvD7C,EAAE,IAAIkC,EAAEI,IAAIS,MAChBb,EAAEG,KAAKU,MAAO,SAEtBF,EAAKf,EAAKrB,KAAKI,EAASqB,GAC1B,MAAOV,GAAKqB,EAAK,CAAC,EAAGrB,GAAIQ,EAAI,UAAeD,EAAI/B,EAAI,EACtD,GAAY,EAAR6C,EAAG,GAAQ,MAAMA,EAAG,GAAI,MAAO,CAAExB,MAAOwB,EAAG,GAAKA,EAAG,QAAK,EAAQlB,MAAM,GArB9BL,CAAK,CAACnB,EAAGyC,MAkFtD,SAASK,EAAcC,EAAIC,EAAMC,GACpC,GAAIA,GAA6B,IAArBhD,UAAUC,OAAc,IAAK,IAA4BgD,EAAxBnD,EAAI,EAAGoD,EAAIH,EAAK9C,OAAYH,EAAIoD,EAAGpD,KACxEmD,GAAQnD,KAAKiD,IACRE,IAAIA,EAAKE,MAAMhD,UAAUiD,MAAM/C,KAAK0C,EAAM,EAAGjD,IAClDmD,EAAGnD,GAAKiD,EAAKjD,IAGrB,OAAOgD,EAAGO,OAAOJ,GAAME,MAAMhD,UAAUiD,MAAM/C,KAAK0C,ICzKtD,SAASO,EAAiBC,GACtB,OAAO,IAAI1C,SAAQ,CAACC,EAASC,KAEzBwC,EAAQC,WAAaD,EAAQE,UAAY,IAAM3C,EAAQyC,EAAQjC,QAE/DiC,EAAQG,QAAUH,EAAQI,QAAU,IAAM5C,EAAOwC,EAAQK,UAGjE,SAASC,EAAYC,EAAQC,GACzB,MAAMC,ICJQC,UAAUC,eAAiB,WAAWC,KAAKF,UAAUG,aAAe,iBAAiBD,KAAKF,UAAUG,YAElGC,UAAUC,UAErB,IAAIzD,SAAQ,SAAUC,GAC3B,IAAIyD,EAAS,WACX,OAAOF,UAAUC,YAAYE,QAAQ1D,IAGvC2D,EAAaC,YAAYH,EAAQ,KACjCA,OACCC,SAAQ,WACT,OAAOG,cAAcF,MAVuB5D,QAAQC,WDE5BU,MAAK,KACzB,MAAM+B,EAAUc,UAAUO,KAAKd,GAE/B,OADAP,EAAQsB,gBAAkB,IAAMtB,EAAQjC,OAAOwD,kBAAkBf,GAC1DT,EAAiBC,MCRhC,IAIMkB,EDMF,MAAO,CAACM,EAAQC,IAAahB,EAAIxC,MAAMyD,GAAOD,EAASC,EAAGC,YAAYnB,EAAWgB,GAAQI,YAAYpB,MAEzG,IAAIqB,EACJ,SAASC,IAIL,OAHKD,IACDA,EAAsBvB,EAAY,eAAgB,WAE/CuB,EAQX,SAASE,EAAIC,EAAKC,EAAcH,KAC5B,OAAOG,EAAY,YAAaC,GAAUnC,EAAiBmC,EAAMH,IAAIC,eEpBzDG,EAAaC,EAAkBC,GAC7C,OAAOD,EAAKE,WAAU,SAACC,SAAS,OAAAA,EAAKC,QAAQC,gBAAOJ,EAAQG,8BAASC,QAAO,WAG9DC,EAAaC,GAC3B,OAAQA,GACN,IAAK,QACH,OAAOC,OAAOC,aAAaC,QAAQC,KAAKF,cAG1C,IAAK,UACH,OAAOD,OAAOI,eAAeF,QAAQC,KAAKC,gBAG5C,IAAK,MACH,OAAO,SAAChB,EAAatE,GAAkB,OFc7C,SAAasE,EAAKtE,EAAOuE,EAAcH,KACnC,OAAOG,EAAY,aAAcC,IAC7BA,EAAMe,IAAIvF,EAAOsE,GACVjC,EAAiBmC,EAAMP,gBEjBOuB,CAAIlB,EAAKtE,IAGlD,QACE,OAAO,uBAKGyF,EAAeR,GAC7B,OAAQA,GACN,IAAK,QACH,OAAOC,OAAOC,aAAaO,WAAWL,KAAKF,cAG7C,IAAK,UACH,OAAOD,OAAOI,eAAeI,WAAWL,KAAKC,gBAG/C,IAAK,MACH,OAAO,SAAChB,GAAgB,OFoD9B,SAAaA,EAAKC,EAAcH,KAC5B,OAAOG,EAAY,aAAcC,IAC7BA,EAAMmB,OAAOrB,GACNjC,EAAiBmC,EAAMP,gBEvDR2B,CAAItB,IAG9B,QACE,OAAO,cC9Cb,IC8BauB,EAA0B,CACrCnB,KAAM,GACNoB,MAAM,GAeFC,EAAc,SAClBC,EACAC,GAEA,OAAQA,EAAOC,MACb,IAhCqB,iBAiCnB,OAAOD,EAAOE,SACVF,EAAOE,SAASH,EAAOC,GCtDE,SACjCD,EACAC,GAEA,IAAMvB,OAAuBuB,EAAOtB,SAIpC,OAFAK,EAAaiB,EAAOhB,QAApBD,CAA6BiB,EAAOG,UAAY,OAAQC,KAAKC,UAAU5B,WAGlEsB,IACHtB,SD6CM6B,CAAgBP,EAAOC,GAG7B,IArCuB,mBAsCrB,OAAOA,EAAOO,UACVP,EAAOO,UAAUR,EAAOC,GD5DG,SACnCD,EACAC,GAEA,IAAMQ,EAAWR,EAAOQ,UAAYhC,EAC9BC,EAAmB+B,EAAST,EAAMtB,KAAMuB,EAAOtB,SACjDqB,EAAMtB,KAAKgC,KAAI,SAAC7B,GACd,OAAI4B,EAAS,CAAC5B,GAAOoB,EAAOtB,gBAErBE,IACH8B,SAAU9B,EAAK8B,UAAYV,EAAOtB,QAAQgC,UAAY,KAInD9B,YAELmB,EAAMtB,YAAWuB,EAAOtB,WAIhC,OAFAK,EAAaiB,EAAOhB,QAApBD,CAA6BiB,EAAOG,UAAY,OAAQC,KAAKC,UAAU5B,WAGlEsB,IACHtB,SCuCMkC,CAAiBZ,EAAOC,GAG9B,IAxCuB,mBAyCrB,OAAOA,EAAOY,WACVZ,EAAOY,WAAWb,EAAOC,GElEI,SACrCD,EACAC,GAEA,IAAMvB,EAAmBsB,EAAMtB,KAAKgC,KAAI,SAAC7B,GACvC,IAAM4B,EAAWR,EAAOQ,UAAYhC,EAChCqC,EAAiB,KAarB,OAXIL,EAAS,CAAC5B,GAAOoB,EAAOtB,WAC1BmC,OAAiBjC,GACjBpG,OAAOsI,KAAKlC,GAAMmC,SAAQ,SAAC1C,GACzB,IAAMtE,EAASiG,EAAOtB,QAAgBL,GAE1B,OAARA,GAAgBwC,EAAUxC,KAAStE,IACrC8G,EAAUxC,GAAOtE,OAKhB8G,GAAajC,KAKtB,OAFAG,EAAaiB,EAAOhB,QAApBD,CAA6BiB,EAAOG,UAAY,OAAQC,KAAKC,UAAU5B,WAGlEsB,IACHtB,SFyCMuC,CAAkBjB,EAAOC,GAG/B,IA7C4B,wBA8C1B,OAAOA,EAAOiB,eACVjB,EAAOiB,eAAelB,EAAOC,GGrEQ,SAC7CD,EACAC,GAEA,IAAMQ,EAAWR,EAAOQ,UAAYhC,EAE9BC,EAAmBsB,EAAMtB,KAAKyC,QAClC,SAACtC,GAAS,OAAC4B,EAAS,CAAC5B,GAAOoB,EAAOtB,YAKrC,OAFAK,EAAaiB,EAAOhB,QAApBD,CAA6BiB,EAAOG,UAAY,OAAQC,KAAKC,UAAU5B,WAGlEsB,IACHtB,SHwDM0C,CAAsBpB,EAAOC,GAGnC,IAtD0B,sBAuDxB,OAAOA,EAAOoB,cACVpB,EAAOoB,cAAcrB,EAAOC,GI3EO,SAC3CD,EACAC,GAEA,IAAMvB,EAAmBsB,EAAMtB,KAAKgC,KAAI,SAAC7B,GAGvC,OAFiBoB,EAAOQ,UAAYhC,GAEvB,CAACI,GAAOoB,EAAOtB,gBACdE,IAAM8B,SAAU9B,EAAK8B,SAAW,IAGvC9B,KAKT,OAFAG,EAAaiB,EAAOhB,QAApBD,CAA6BiB,EAAOG,UAAY,OAAQC,KAAKC,UAAU5B,WAGlEsB,IACHtB,SJ0DM4C,CAAqBtB,EAAOC,GAGlC,IA3D0B,sBA4DxB,OAAOA,EAAOsB,cACVtB,EAAOsB,cAAcvB,EAAOC,GKjFO,SAC3CD,EACAC,GAEA,IAAMvB,EAAmBsB,EAAMtB,KAC5BgC,KAAI,SAAC7B,GAGJ,OAFiBoB,EAAOQ,UAAYhC,GAEvB,CAACI,GAAOoB,EAAOtB,gBAErBE,IACH8B,SAAU9B,EAAK8B,SAAW,IAIvB9B,KAERsC,QAAO,SAACtC,GAAS,OAAAA,EAAK8B,YAIzB,OAFA3B,EAAaiB,EAAOhB,QAApBD,CAA6BiB,EAAOG,UAAY,OAAQC,KAAKC,UAAU5B,WAGlEsB,IACHtB,SL2DM8C,CAAqBxB,EAAOC,GAGlC,IA5DsB,aA6DpB,OAAOA,EAAOwB,UACVxB,EAAOwB,UAAUzB,EAAOC,GM5FG,SACnCD,EACAC,GAIA,OAFAR,EAAeQ,EAAOhB,QAAtBQ,CAA+BQ,EAAOG,UAAY,eAG7CJ,IACHtB,KAAM,KNqFAgD,CAAiB1B,EAAOC,GAE9B,IAnEuB,yBAoErB,OAAOA,EAAO0B,WACV1B,EAAO0B,WAAW3B,EAAOC,GO7FI,SACrCD,EACAC,GAEA,IAAIH,GAAQE,EAAMF,KACZ8B,EAAO3B,EAAOtB,QAUpB,OARIiD,IACW,SAATA,EACF9B,GAAO,EACW,WAAT8B,IACT9B,GAAO,WAKNE,IACHF,SP6EM+B,CAAkB7B,EAAOC,GAG/B,QACE,MAAM,IAAI6B,MAAM,yCQtDhBC,EAAcC,EAAMC,cAAgC,MACpDC,EAAoBF,EAAMC,cAAsC,MAChEE,EAAkBH,EAAMC,cAAgCxD,GAEjD2D,EAAsC,SAACC,OAClDC,aACAC,YAAAtD,aAAU,UACVuD,aAAApC,aAAW,SACXI,cACAiB,cACAF,kBACAF,kBACAH,mBACAS,eACAd,eACAJ,aAEMgC,EAAoBC,EAAW3C,EAAaF,GAA3CG,OAAO2C,OAEdC,GAAU,WACR,IACIC,EADAnE,EAAmB,IAGvB,6GACMoE,EAAwC,GACxC7D,EACc,UAAZA,SACF6D,EAAa5D,OAAOC,aAAa4D,QAAQ3C,6BACpB,YAAZnB,SACT6D,EAAa5D,OAAOI,eAAeyD,QAAQ3C,uBACtB,QAAZnB,WACUZ,EAAI+B,WAAvB0C,EAAaT,0BAEXS,IACFD,EAAkBxC,KAAK2C,MAAMF,GAEvBG,KAAqBJ,MAAAA,SAAAA,EAAiB7J,SACxC6J,EACGnC,KAAI,SAAC7H,GAAiC,MAAA,cAAeA,KACrDqK,MAAK,SAACC,GAAW,OAAAA,MAItBzE,EADEuE,EACMJ,EAAqCnC,KAAI,SAAC7B,GAChD,OVrCV8B,GAFkCyC,EUuCFvE,YVpChCwE,EAiCED,YAhCFE,EAgCEF,QA/BFG,EA+BEH,mBA9BFI,EA8BEJ,YA7BFK,EA6BEL,cA5BFM,EA4BEN,gBA3BFO,EA2BEP,eA1BFQ,EA0BER,SAzBFS,EAyBET,YAxBFU,EAwBEV,SAvBFW,EAuBEX,QAtBFY,EAsBEZ,aArBFa,EAqBEb,gBApBFc,EAoBEd,sBAnBFe,EAmBEf,sBAlBFgB,EAkBEhB,yBAjBFiB,EAiBEjB,aAhBFkB,EAgBElB,cAfFmB,EAeEnB,OAdFoB,EAcEpB,QAbFqB,EAaErB,YAZFsB,EAYEtB,WAXFuB,EAWEvB,SAVFwB,EAUExB,iBATFyB,EASEzB,yBARFrE,EAQEqE,KAPF0B,EAOE1B,QANF2B,EAME3B,gBALF4B,EAKE5B,kBAJF6B,EAIE7B,MAHF8B,EAGE9B,YAFF+B,EAEE/B,SADFgC,EACEhC,aAEG,CACLzC,SAAU0E,OAAOC,UAAU3E,GAAaA,EAAsB,EAC9D4E,QAAS,CACPhC,mBACAC,YACAC,cACAC,gBACAC,eACAC,SACA7E,GAAIsE,EACJQ,YACAC,SACAC,QACAC,aACAC,gBACAC,sBACAC,sBACAC,yBACAC,aACAC,cACAC,OACAC,QACAC,YACAC,WACAC,UAEF7F,eACKsE,EAAWtE,UACd8F,iBACAC,yBACAnB,cAAeJ,EACfvE,KACA+F,QACAC,gBACAC,kBACAC,MACAC,YACAC,SACAC,oBA5EgChC,EAElCzC,EACA0C,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACA9F,EACA+F,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,KUOevC,IAGPF,EAAS,CACPzC,KR7EW,iBQ8EXvB,QAASD,EACTO,UACAmB,gDAMVD,KACC,CAAClB,EAASmB,IAEb,IAAMoF,EAA2BC,GAC/B,WAAM,OACJtF,SAAU,SAACxB,GACT,OAAAgE,EAAS,CACPzC,KR7Fe,iBQ8FfvB,UACAM,UACAmB,cAEJI,UAAW,SAAC7B,GACV,OAAAgE,EAAS,CACPzC,KRnGiB,mBQoGjBvB,UACA8B,WACAD,YACAvB,UACAmB,cAEJc,eAAgB,SAACvC,GACf,OAAAgE,EAAS,CACPzC,KRxGsB,wBQyGtBvB,UACA8B,WACAS,iBACAjC,UACAmB,cAEJS,WAAY,SAAClC,GACX,OAAAgE,EAAS,CACPzC,KRlHiB,mBQmHjBvB,UACA8B,WACAI,aACA5B,UACAmB,cAEJiB,cAAe,SAAC1C,GACd,OAAAgE,EAAS,CACPzC,KR7HoB,sBQ8HpBvB,UACA8B,WACAY,gBACApC,UACAmB,cAEJmB,cAAe,SAAC5C,GACd,OAAAgE,EAAS,CACPzC,KRrIoB,sBQsIpBvB,UACA8B,WACAc,gBACAtC,UACAmB,cAEJuB,WAAY,SAAChD,GACX,OAAAgE,EAAS,CAAEzC,KR1IQ,yBQ0IWvB,UAASgD,gBACzCF,UAAW,WACT,OAAAkB,EAAS,CACPzC,KR3IgB,aQ4IhBuB,YACAxC,gBAGN,CACEwB,EACAD,EACAU,EACAL,EACAQ,EACAE,EACAI,EACAF,EACAxC,EACAmB,IAIJ,OACE4B,gBAACD,EAAY2D,UAAS1L,MAAOgG,GAC3BgC,gBAACE,EAAkBwD,UAAS1L,MAAOwL,GACjCxD,gBAACG,EAAgBuD,UAAS1L,MAAOyG,GAAYhC,GAC1C6D,UC3LLqD,EAAU,WACd,MAAA,CDuMOC,EAAW7D,GAiBX6D,EAAW1D,GASX0D,EAAWzD,KExOP0D,EACA,mBADAA,EAEP,aAFOA,EAGN,uBAGSC,EAAgBxH,EAAeyH,GAC7C,GAAsB,oBAAX7G,OAAwB,CACjC,IAAML,EAAOK,OAAOC,aAAa4D,QAAQzE,GAEzC,QAAIO,GACKwB,KAAK2C,MAAMnE,GAMtB,OAAOkH,WAGOC,EACd1H,EACAyH,GAEA,gBAFAA,MAEsB,oBAAX7G,OAAwB,CACjC,IAAML,EAAOK,OAAOC,aAAa4D,QAAQzE,GAEzC,OAAIO,GAIG,GAGT,OAAOkH,WAGO/G,EAAaV,EAAetE,GACpB,oBAAXkF,QAA0BlF,GACnCkF,OAAOC,aAAaC,QAAQd,EAAKtE,YAIrByF,EAAenB,GACP,oBAAXY,QAA0BZ,GACnCY,OAAOC,aAAaO,WAAWpB,GC5CnC,ICQauB,EAA8B,CACzCoG,UAAWH,EAAgBD,GAAqB,GAChD9G,GAAIiH,EAAeH,GACnBK,IAAK,GACLC,iBAAkB,GAClBC,qBAAsB,IASlBC,EAAmD,SACvDrG,EACAC,GAEA,OAAQA,EAAOC,MACb,IAX+B,+BAY7B,OD3BJT,EAAeoG,GACfpG,EAAeoG,GACfpG,EAAeoG,GAER,CACLI,WAAW,EACXlH,GAAI,GACJmH,IAAK,GACLC,iBAAkB,GAClBC,qBAAsB,ICqBtB,IAdiC,iCAe/B,OChCqB,SACzBpG,EACAC,GAEM,IAAAoC,EAAyBpC,EAAOtB,QAA9BsH,cAAWlH,OAAImH,QAMvB,OAJAlH,EAAa6G,EAAqBI,EAAUK,YAC5CtH,EAAa6G,EAAc9G,GAC3BC,EAAa6G,EAAeK,UAGvBlG,IACHiG,YACAlH,KACAmH,QDkBSK,CAAmBvG,EAAOC,GAGnC,IAjBkC,kCAkBhC,OEjCsB,SAC1BD,EACAC,GAMA,OAJAjB,EAAa6G,EAAqB,SAClCpG,EAAeoG,GACfpG,EAAeoG,UAGV7F,IACHiG,WAAW,EACXlH,GAAI,GACJmH,IAAK,GACLC,iBAAkBlG,EAAOtB,UFoBhB6H,CAAoBxG,EAAOC,GAGpC,IAnBqC,qCAoBnC,OGrCkB,SACtBD,EACAC,GAEM,IAAAoC,EAAcpC,EAAOtB,QAAnBI,OAAImH,QAMZ,OAJAlH,EAAa6G,EAAc9G,GAC3BC,EAAa6G,EAAeK,GAC5BlH,EAAa6G,EAAqB,gBAG7B7F,IACHiG,WAAW,EACXlH,KACAmH,MACAE,qBAAsB,KHsBbK,CAAuBzG,EAAOC,GAGvC,IAxBsC,sCAyBpC,OIzC0B,SAC9BD,EACAC,GAMA,OAJAjB,EAAa6G,EAAqB,SAClCpG,EAAeoG,GACfpG,EAAeoG,UAGV7F,IACHiG,WAAW,EACXlH,GAAI,GACJmH,IAAK,GACLE,qBAAsBnG,EAAOtB,UJ4BpB+H,CAAwB1G,EAAOC,GAGxC,QACE,MAAM,IAAI6B,MAAM,6CKnBhB6E,EAAwB3E,EAAMC,cAA8B,CAChE5D,IAAK,WAAM,OAAAzE,QAAQC,QAAQ,CAAEkF,GAAI,GAAImH,IAAK,GAAID,WAAW,KACzDW,QAAS,WAAM,OAAAhN,QAAQC,QAAQ,CAAEkF,GAAI,GAAImH,IAAK,GAAID,WAAW,OAGzDY,EAAsB7E,EAAMC,cAChCpC,GAEIiH,EAAwB9E,EAAMC,cAClC,MAEI8E,EAAuB/E,EAAMC,eAAuB,GAE7C+E,EAA8C,SAAC3E,OAC1DC,aACA2E,mBACAC,2BAEM3E,EAAoC4E,GAAS,GAA5CC,OAAeC,OAChBC,EAAYC,GAAO,GACnBC,EAAqBD,GAAO,GAG5B/E,EAA4BE,EAAW2D,EAAiBxG,GAAvD4H,OAAe9E,OAKhB+E,EAAcC,GAClB,SAACC,GACC,OAAOX,EACJ5I,IAAIuJ,GACJrN,MAAK,SAACsN,GAGL,OAFAlF,EAAS,CAAEzC,KL7CgB,iCK6CavB,QAASkJ,IAE1CA,KAERC,OAAM,SAACC,GAGN,MAFApF,EAAS,CAAEzC,KLjDiB,kCKiDavB,QAASoJ,IAE5C,IAAIjG,MAAMiG,QAGtB,CAACd,IAGGe,EAAkBL,GACtB,SAACC,GAEC,OADAP,GAAiB,GACVJ,EACJL,QAAQgB,GACRrN,MAAK,SAACsN,GAWL,OAVIA,EAAK9I,IAAyB,iBAAZ8I,EAAK9I,IACzBC,EAAa6G,EAAcgC,EAAK9I,IAGlC4D,EAAS,CACPzC,KLlE6B,qCKmE7BvB,QAASkJ,IAEXR,GAAiB,GAEVQ,KAERC,OAAM,SAACC,GAON,MANApF,EAAS,CACPzC,KL5E8B,sCK6E9BvB,QAASoJ,IAEXV,GAAiB,GAEX,IAAIvF,MAAMiG,QAGtB,CAACd,IAwCH,OApCArE,GACE,WAAM,OAAA,WACJ0E,EAAUW,SAAU,KAEtB,IAIFrF,GAAU,WACR,IAAMsF,EACJT,EAAcxB,WAAaH,EAAgBD,GAAqB,GAC5D9G,EAAK0I,EAAc1I,IAAMiH,EAAeH,GACxCK,EAAMuB,EAAcvB,KAAOF,EAAeH,IAG9C9G,IACAmH,GACCgC,GACAd,GACAI,EAAmBS,UAEpBT,EAAmBS,SAAU,EAE7BP,EAAY,CAAE3I,KAAImH,QAAO4B,OAAM,SAACC,GAAQ,OAAAI,QAAQC,KAAKL,SAEtD,CAACN,EAAeC,EAAaN,IAEhCxE,GAAU,gBAC8B,IAA3BsE,GACTiB,QAAQC,KACN,wKAOJpG,gBAAC2E,EAAsBjB,UAAS1L,MAAOiN,GACrCjF,gBAAC6E,EAAoBnB,UAAS1L,MAAOyN,GACnCzF,gBAAC8E,EAAsBpB,UACrB1L,MAAO,CAAEqO,kBA5FS,WAAM,OAAA1F,EAAS,CAAEzC,KLvCV,kCKmIGwH,cAAaM,oBAEzChG,gBAAC+E,EAAqBrB,UAAS1L,MAAOoN,GACnC9E,WCzIPgG,EAAc,WAKlB,MAAO,CDiJA1C,EAAWiB,GAIXjB,EAAWkB,GAIXlB,EAAWmB"}